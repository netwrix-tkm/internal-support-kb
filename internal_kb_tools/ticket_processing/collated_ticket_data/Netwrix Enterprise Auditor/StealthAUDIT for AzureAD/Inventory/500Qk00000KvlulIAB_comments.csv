"Id","ParentId","CommentBody","CreatedById","CreatedDate","LastModifiedDate","IsPublished","IsDeleted"
"00aQk00000BYvC1IAL","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Account ACV has been changed to 378017.9200000000172.","0054u000006gpoAAAQ","2025-01-31T22:26:12.000Z","2025-01-31T22:26:12.000Z","false","false"
"00aQk00000BYvDdIAL","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Account ACV has been changed to 189008.9600000000086.","0054u000006gpoAAAQ","2025-01-31T22:26:14.000Z","2025-01-31T22:26:14.000Z","false","false"
"00aQk00000BagTqIAJ","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: Carlos Mejia:

@Salesforce @Helen Randall @Michael Burrofato @Ethan Israel I am seeing an error right near the beginning of the log: 

28/01/2025 11:22:47	DEBUG	AZUREADINVENTORY	Stealthbits.StealthAUDIT.DataCollectors.AzureADInventory.Tasks.AADInventoryScanTask.InternalProcessRecord	""System.Data.SqlClient.SqlException (0x80131904): Cannot continue the execution because the session is in the kill state.  A severe error occurred on the current command.  The results, if any, should be discarded.     at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)     at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)     at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)     at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)     at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)     at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)     at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)     at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)     at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()     at Stealthbits.StealthAUDIT.DataCollectors.AzureADInventory.Database.AADInventoryDatabaseUpdate.RemoveOldDomainData()  ClientConnectionId:3cd73421-55b6-495d-ab49-96ca6361173d  Error Number:596,State:1,Class:21""	MOTIVALLC.ONMICROSOFT.COM	DCExtract	21604	13356	7364

Not entirely sure what is happening here. I reviewed the previous logs from the artifacts and do not see them in debug mode so i'd like to see if this error is constantly occuring.. Can the server be rebooted (to refresh the SQL connection), rerun the scan, and provide us with new debug logs?

[DevOps CommentId:11589524]","0054u000006gtWUAAY","2025-02-03T14:55:17.000Z","2025-02-03T14:55:17.000Z","false","false"
"00aQk00000BagVRIAZ","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting Escalating Engineer.","0054u000006gtWUAAY","2025-02-03T14:55:27.000Z","2025-02-03T14:55:27.000Z","false","false"
"00aQk00000BagVTIAZ","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: Carlos Mejia:

@WaitingOnEngineer

[DevOps CommentId:11589528]","0054u000006gtWUAAY","2025-02-03T14:55:28.000Z","2025-02-03T14:55:28.000Z","false","false"
"00aQk00000Barx7IAB","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting Client.","0054u000006gpoAAAQ","2025-02-03T16:30:50.000Z","2025-02-03T16:30:50.000Z","false","false"
"00aQk00000Bjl2rIAB","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting Escalating Engineer.","0054u000006gtWUAAY","2025-02-11T05:04:56.000Z","2025-02-11T05:04:56.000Z","false","false"
"00aQk00000Bjl2tIAB","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: -- DevOps Automation Assistant --

This escalation has been in the status 'Awaiting Support' since 2025-02-03 14:55 UTC and no response has been detected.

If this escalation has been resolved with the customer, please add a comment so this can be closed in Azure DevOps.

@WaitingOnEngineer

[DevOps CommentId:11625426]","0054u000006gtWUAAY","2025-02-11T05:04:56.000Z","2025-02-11T05:04:56.000Z","false","false"
"00aQk00000Bk9wPIAR","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting Client.","0054u000006gpoAAAQ","2025-02-11T14:23:33.000Z","2025-02-11T14:23:33.000Z","false","false"
"00aQk00000BvUSsIAN","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: New Debug log is uploaded.
We notice it hangs for like 10 minutes on the Adding Domain part of the scan. Then it starts to collect before it fails with the Scalar message
We ran a full scan and a diff scan. no change in behavior. 

He says crowdstrike doesn't report any behavior that corresponds with the errors. I also didn't see any event viewer logs that seemed to correspond either.","0054u000006gpoAAAQ","2025-02-20T22:07:58.000Z","2025-02-20T22:07:58.000Z","false","false"
"00aQk00000BvUUTIA3","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting R&D.","0054u000006gpoAAAQ","2025-02-20T22:08:07.000Z","2025-02-20T22:08:07.000Z","false","false"
"00aQk00000Bw8gQIAR","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: Carlos Mejia:

@Salesforce The ExecuteScalar requires an open and available connection issue points to a database connectivity issue. I recommend involving their DBA  or System Administrator to investigate further on the connectivity issues.

[DevOps CommentId:11685760]","0054u000006gtWUAAY","2025-02-21T14:38:04.000Z","2025-02-21T14:38:04.000Z","false","false"
"00aQk00000C1JrKIAV","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: Do you have any specifics on what to look for. Their DBA team seems to not be helpful.
Event logs or SQL logs during the time it fails i would assume, but anything else?","0054u000006gpoAAAQ","2025-02-26T15:30:25.000Z","2025-02-26T15:30:25.000Z","false","false"
"00aQk00000C1KYsIAN","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: Carlos Mejia:

@Salesforce Event logs on the NEA and SQL server are a great start to see if there is any indicators of any forced timeouts/connections and its source. A DBA or sys admin should be able to identify/investigate if there are any hard coded SQL timeouts on the SQL server that is impacting the scan. 

[DevOps CommentId:11707172]","0054u000006gtWUAAY","2025-02-26T15:40:03.000Z","2025-02-26T15:40:03.000Z","false","false"
"00aQk00000C1Kx3IAF","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting Escalating Engineer.","0054u000006gtWUAAY","2025-02-26T15:43:35.000Z","2025-02-26T15:43:35.000Z","false","false"
"00aQk00000C1Kx5IAF","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: Carlos Mejia:

@Salesforce @WaitingOnEngineer  Also, it's probably worth reviewing all the timeouts within the product to ensure there aren't any that were tampered with. For example, the SQL command timeout on the storage profile.

[DevOps CommentId:11707206]","0054u000006gtWUAAY","2025-02-26T15:43:36.000Z","2025-02-26T15:43:36.000Z","false","false"
"00aQk00000C1TVhIAN","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting Client.","0054u000006gpoAAAQ","2025-02-26T16:56:07.000Z","2025-02-26T16:56:07.000Z","false","false"
"00aQk00000C4F83IAF","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: I have reviewed all timeouts that can be found. other SQL jobs work fine and go much longer than the 25 minutes this one ends in.

Their MSP is still investigating.

One thing I noted before is the ADDING Domain step takes a long time  to complete. in most cases that is done in seconds. 
This happens every run. Then less than a few minutes after it passes that and starts collecting is when the scan stops with the execute scalar.

Could that be playing a part in this?

03/02/2025 11:21:07	DEBUG	AZUREADINVENTORY	Stealthbits.StealthAUDIT.DataCollectors.AzureADInventory.Tasks.AADInventoryScanTask.InternalProcessRecord	""Begin removing old domain data for domain 1""	MOTIVALLC.ONMICROSOFT.COM	DCExtract	9380	9240	8436
03/02/2025 11:36:45	DEBUG	AZUREADINVENTORY	Stealthbits.StealthAUDIT.DataCollectors.AzureADInventory.Tasks.AADInventoryScanTask.InternalProcessRecord	""Error removing old domain data for domain 1""","0054u000006gpoAAAQ","2025-02-28T18:33:05.000Z","2025-02-28T18:33:05.000Z","false","false"
"00aQk00000C4IU5IAN","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Awaiting R&D.","0054u000006gpoAAAQ","2025-02-28T18:33:25.000Z","2025-02-28T18:33:25.000Z","false","false"
"00aQk00000C8XxaIAF","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the new comment has been added: I took a shot in the dark. And dropped the Entra ID tables.
Since then it completed a full and several Diff scans.

It immediately added the domain and proceeded with the scan.
I suspect the Adding Domin section is what caused the timeout, but still no answer as to why.","0054u000006gpoAAAQ","2025-03-04T22:32:40.000Z","2025-03-04T22:32:40.000Z","false","false"
"00aQk00000C8Y5dIAF","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Status has been changed to Closed - Resolved.","0054u000006gpoAAAQ","2025-03-04T22:34:34.000Z","2025-03-04T22:34:34.000Z","false","false"
"00aQk00000C8Y5fIAF","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Account ACV has been changed to 378017.9200000000172.","0054u000006gpoAAAQ","2025-03-04T22:34:37.000Z","2025-03-04T22:34:37.000Z","false","false"
"00aQk00000C8VEEIA3","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Account ACV has been changed to 189008.9600000000086.","0054u000006gtWUAAY","2025-03-04T22:34:55.000Z","2025-03-04T22:34:55.000Z","false","false"
"00aQk00000CZchqIAD","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Account ACV has been changed to 379748.8866666667086.","0054u000006gtWUAAY","2025-03-27T13:08:26.000Z","2025-03-27T13:08:26.000Z","false","false"
"00aQk00000DLlPRIA1","500Qk00000KvlulIAB","On Escalation Ticket # 00434360 the Following Fields have been updated: 
Account ACV has been changed to 420455.8866666667086.","0054u000006gtWUAAY","2025-05-08T09:20:59.000Z","2025-05-08T09:20:59.000Z","false","false"
