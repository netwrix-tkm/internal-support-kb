"Id","ParentId","CreatedDate","LastModifiedDate","TextBody","Subject","FromAddress","FromName","ToAddress","CcAddress","BccAddress","HasAttachment","MessageDate","IsExternallyVisible"
"02sQk00000HbPNRIA3","500Qk00000Fc46nIAB","2024-11-07T09:27:19.000Z","2024-11-07T09:27:19.000Z","Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,

 

We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.

 

Thanks

Tara

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

 


Hi Damir,

 

Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.

 

Thanks

Tara

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT 
    s.session_id, 
    s.login_name, 
    s.host_name, 
    t.[text] AS [Query Text],
    r.total_elapsed_time, 
    r.wait_time, 
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

 


Hi Damir,

 

Sorry, I’ve been busy on other more pressing workload. Booked for next week.

 

Thanks

Tara

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

 


Hi Aleksandr,



 



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



 



Thanks



Tara



 






From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


 




Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""    

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]
 

Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.



Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested","RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","techsupport@netwrix.com","Netwrix Support","tj260@cam.ac.uk","","damir.akhmatshin@netwrix.com","true","2024-11-07T09:27:18.000Z","true"
"02sQk00000HbRYvIAN","500Qk00000Fc46nIAB","2024-11-07T09:56:48.000Z","2024-11-11T10:34:27.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Damir,

This situation is still the same.
""We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.""
Thanks
Tara


From: Netwrix Support <techsupport@netwrix.com>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,

We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,

Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,

Sorry, I've been busy on other more pressing workload. Booked for next week.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Aleksandr,

So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.

Thanks
Tara

________________________________
From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image001.png@01DB30FB.50008EE0]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested","RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com","","","true","2024-11-07T09:56:28.000Z","true"
"02sQk00000HxvV8IAJ","500Qk00000Fc46nIAB","2024-11-15T09:05:33.000Z","2024-11-15T09:05:33.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Dear Damir,

To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.

[cid:image002.png@01DB373D.79747690]

Thanks
Tara

From: Tara Jeffery <tj260@cam.ac.uk>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Damir,

This situation is still the same.
""We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.""
Thanks
Tara


From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,

We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,

Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,

Sorry, I've been busy on other more pressing workload. Booked for next week.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Aleksandr,

So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.

Thanks
Tara

________________________________
From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image003.png@01DB373D.79747690]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested","RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com; tj260@cam.ac.uk","nec10@cam.ac.uk; andy.watson@netwrix.com","","true","2024-11-15T09:05:12.000Z","true"
"02sQk00000HxxNGIAZ","500Qk00000Fc46nIAB","2024-11-15T09:07:28.000Z","2024-11-15T09:07:28.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Hi Tara

If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running

Regards



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>; Andy Watson <Andy.Watson@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image002.png@01DB373D.79747690]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image003.png@01DB373D.79747690]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","andy.watson@netwrix.com","Andy Watson","techsupport@netwrix.com; tj260@cam.ac.uk","nec10@cam.ac.uk","","true","2024-11-15T09:07:20.000Z","true"
"02sQk00000Hy17VIAR","500Qk00000Fc46nIAB","2024-11-15T09:09:54.000Z","2024-11-15T09:09:54.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Hi Andy,

I am available from 11am onwards today (UK Time) if that works for you?

Thanks
Tara

From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara

If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running

Regards



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB373E.16615860]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

""We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.""

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I've been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB373E.16615860]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com; andy.watson@netwrix.com","nick.cole@uis.cam.ac.uk","","true","2024-11-15T09:09:35.000Z","true"
"02sQk00000HxvwbIAB","500Qk00000Fc46nIAB","2024-11-15T09:14:59.000Z","2024-11-15T09:14:59.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Unfortunately I'm fully booked today - free after 1430 on Monday



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB373E.16615860]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB373E.16615860]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","andy.watson@netwrix.com","Andy Watson","techsupport@netwrix.com; tj260@cam.ac.uk","nick.cole@uis.cam.ac.uk","","true","2024-11-15T09:14:50.000Z","true"
"02sQk00000Hy1dlIAB","500Qk00000Fc46nIAB","2024-11-15T09:17:29.000Z","2024-11-15T10:37:27.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Hi Andy,

I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.

Thanks
Tara
________________________________
From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Unfortunately I'm fully booked today - free after 1430 on Monday



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB373E.16615860]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB373E.16615860]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com; andy.watson@netwrix.com","nick.cole@uis.cam.ac.uk","","true","2024-11-15T09:17:10.000Z","true"
"02sQk00000Hy6wpIAB","500Qk00000Fc46nIAB","2024-11-15T10:54:33.000Z","2024-11-15T10:54:33.000Z","ref:_00D7091pB._500Q000Fc46n:ref

OK - it maybe someone on the support side would be able to assist.

You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.

When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:

select *
from SA_JobTaskStatsTbl
where
      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24
      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Andy,

I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.

Thanks
Tara
________________________________
From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Unfortunately I'm fully booked today - free after 1430 on Monday



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB373E.16615860]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB373E.16615860]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","andy.watson@netwrix.com","Andy Watson","techsupport@netwrix.com; tj260@cam.ac.uk","nick.cole@uis.cam.ac.uk","","true","2024-11-15T10:54:23.000Z","true"
"02sQk00000Hy8tmIAB","500Qk00000Fc46nIAB","2024-11-15T11:04:42.000Z","2024-11-15T11:04:42.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Hi Andy,

Which Saved SQL query are you referring too?

Thanks
Tara

From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 10:54
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

OK - it maybe someone on the support side would be able to assist.

You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.

When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:

select *
from SA_JobTaskStatsTbl
where
      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24
      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Andy,

I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.

Thanks
Tara
________________________________
From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Unfortunately I'm fully booked today - free after 1430 on Monday



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB374E.1DB4B340]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB374E.1DB4B340]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com; andy.watson@netwrix.com","nick.cole@uis.cam.ac.uk","","true","2024-11-15T11:04:24.000Z","true"
"02sQk00000Hy9t3IAB","500Qk00000Fc46nIAB","2024-11-15T11:05:37.000Z","2024-11-15T11:05:37.000Z","ref:_00D7091pB._500Q000Fc46n:ref

I could have sworn that there was a saved SQL query on the SQL server that was used last time the tempdb filled up



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 11:04 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



Which Saved SQL query are you referring too?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 10:54
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



OK - it maybe someone on the support side would be able to assist.



You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.



When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:



select *

from SA_JobTaskStatsTbl

where

      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24

      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.



Thanks

Tara

________________________________

From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Unfortunately I'm fully booked today - free after 1430 on Monday





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB374E.1DB4B340]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB374E.1DB4B340]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","andy.watson@netwrix.com","Andy Watson","techsupport@netwrix.com; tj260@cam.ac.uk","nick.cole@uis.cam.ac.uk","","true","2024-11-15T11:05:29.000Z","true"
"02sQk00000Hy6C3IAJ","500Qk00000Fc46nIAB","2024-11-15T11:12:08.000Z","2024-11-19T07:21:47.000Z","ref:_00D7091pB._500Q000Fc46n:ref

I have run the SQL query you were referring too, for the one you told us to run after, the following gets returned


Thanks
Tara
________________________________
From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 11:05
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

I could have sworn that there was a saved SQL query on the SQL server that was used last time the tempdb filled up



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 11:04 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



Which Saved SQL query are you referring too?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 10:54
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



OK - it maybe someone on the support side would be able to assist.



You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.



When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:



select *

from SA_JobTaskStatsTbl

where

      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24

      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.



Thanks

Tara

________________________________

From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Unfortunately I'm fully booked today - free after 1430 on Monday





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB374E.1DB4B340]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB374E.1DB4B340]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com; andy.watson@netwrix.com","nick.cole@uis.cam.ac.uk","","true","2024-11-15T11:11:50.000Z","true"
"02sQk00000Hy54jIAB","500Qk00000Fc46nIAB","2024-11-15T11:12:36.000Z","2024-11-19T07:21:47.000Z","ref:_00D7091pB._500Q000Fc46n:ref

[cid:ea0d5201-43c3-47fe-b218-1383a53a26ca]
________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: 15 November 2024 11:11
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

I have run the SQL query you were referring too, for the one you told us to run after, the following gets returned


Thanks
Tara
________________________________
From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 11:05
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

I could have sworn that there was a saved SQL query on the SQL server that was used last time the tempdb filled up



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 11:04 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



Which Saved SQL query are you referring too?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 10:54
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



OK - it maybe someone on the support side would be able to assist.



You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.



When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:



select *

from SA_JobTaskStatsTbl

where

      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24

      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.



Thanks

Tara

________________________________

From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Unfortunately I'm fully booked today - free after 1430 on Monday





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image001.png@01DB374E.1DB4B340]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image002.png@01DB374E.1DB4B340]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com; andy.watson@netwrix.com","nick.cole@uis.cam.ac.uk","","true","2024-11-15T11:12:13.000Z","true"
"02sQk00000INDDXIA5","500Qk00000Fc46nIAB","2024-11-25T13:33:17.000Z","2024-11-25T13:33:17.000Z","Hi Tara, could you please provide an update? What is the current status of the issue?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/15/2024 3:12 PM
To: techsupport@netwrix.com; andy.watson@netwrix.com
Cc: nick.cole@uis.cam.ac.uk
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref




 


From: Tara Jeffery <tj260@cam.ac.uk>
Sent: 15 November 2024 11:11
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

 



I have run the SQL query you were referring too, for the one you told us to run after, the following gets returned

 

 

Thanks

Tara

 


From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 11:05
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

 



I could have sworn that there was a saved SQL query on the SQL server that was used last time the tempdb filled up


 

 

Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com

 

 


 


From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 11:04 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

 




Hi Andy,

 

Which Saved SQL query are you referring too?

 

Thanks

Tara

 



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 10:54
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 


OK - it maybe someone on the support side would be able to assist.



 



You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.



 



When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:



 



select *



from SA_JobTaskStatsTbl



where



      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24



      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')




 



 


Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com

 

 






From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


 





Hi Andy,



 



I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.



 



Thanks



Tara






From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


 





Unfortunately I'm fully booked today - free after 1430 on Monday




 



 


Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com

 

 






From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


 





Hi Andy,

 

I am available from 11am onwards today (UK Time) if that works for you?

 

Thanks

Tara

 



From: Andy Watson <Andy.Watson@netwrix.com>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 


Hi Tara



 



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running 



 



Regards




 



 


Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com

 

 






From: Tara Jeffery <tj260@cam.ac.uk>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk>; techsupport <techsupport@netwrix.com>
Cc: Nick Cole <nec10@cam.ac.uk>; Andy Watson <Andy.Watson@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


 





Dear Damir,

 

To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.

 



 

Thanks

Tara

 



From: Tara Jeffery <tj260@cam.ac.uk>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Damir,

 

This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara

 

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


Hi Damir,

 

We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.

 

Thanks

Tara

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

 


Hi Damir,

 

Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.

 

Thanks

Tara

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT 
    s.session_id, 
    s.login_name, 
    s.host_name, 
    t.[text] AS [Query Text],
    r.total_elapsed_time, 
    r.wait_time, 
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

 


Hi Damir,

 

Sorry, I’ve been busy on other more pressing workload. Booked for next week.

 

Thanks

Tara

 



From: Netwrix Support <techsupport@netwrix.com>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



 

Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

 


Hi Aleksandr,



 



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



 



Thanks



Tara



 






From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


 




Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""    

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]
 

Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.



Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested


 
 



 
 



 











Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.





Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.





Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.




Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","techsupport@netwrix.com","Netwrix Support","tj260@cam.ac.uk","","damir.akhmatshin@netwrix.com","true","2024-11-25T13:33:16.000Z","true"
"02sQk00000INKQSIA5","500Qk00000Fc46nIAB","2024-11-25T14:53:51.000Z","2024-11-25T14:53:51.000Z","ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,

Its still ongoing while Andy rewrites the required routines to improve the performance within our environment as spoken about in the meeting last week.

Thanks
Tara

From: Netwrix Support <techsupport@netwrix.com>
Sent: 25 November 2024 13:33
To: Tara Jeffery <tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, could you please provide an update? What is the current status of the issue?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/15/2024 3:12 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>; andy.watson@netwrix.com<mailto:andy.watson@netwrix.com>
Cc: nick.cole@uis.cam.ac.uk<mailto:nick.cole@uis.cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref


[cid:image001.png@01DB3F49.C8B94870]

________________________________
From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 15 November 2024 11:11
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

I have run the SQL query you were referring too, for the one you told us to run after, the following gets returned


Thanks
Tara

________________________________
From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 11:05
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

I could have sworn that there was a saved SQL query on the SQL server that was used last time the tempdb filled up



Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________
From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 11:04 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Andy,



Which Saved SQL query are you referring too?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 10:54
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



OK - it maybe someone on the support side would be able to assist.



You've got the saved query in SQL which should help you resolve the issue if the disk space hasn't been cleared.



When it is if you update the query below so the time and date and roughly correct for when the disk filled up then it should give the result of any job that failed to finish nicely or ended after the tempdb filled up:



select *

from SA_JobTaskStatsTbl

where

      DATEDIFF(hh,starttime,'2024-11-12 02:21:23.447') < 24

      AND (EndTime IS NULL OR ENdtime > '2024-11-12 02:21:23.447')





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:17 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I have a meeting that afternoon. I will next have availability on Tuesday, if that helps.



Thanks

Tara

________________________________

From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:14
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Unfortunately I'm fully booked today - free after 1430 on Monday





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:09 AM
To: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <Nick.Cole@uis.cam.ac.uk<mailto:Nick.Cole@uis.cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Andy,



I am available from 11am onwards today (UK Time) if that works for you?



Thanks

Tara



From: Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Sent: 15 November 2024 09:07
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara



If you guys have the time that any error was raised we can go back through the task stats log inside Enterprise Auditor to work out which jobs were running



Regards





Andy Watson

Senior Systems Engineer

Advanced Notice of Leave: 20th December - 2nd January

____________________________ _____________

Powerful Data Security Made Easy

5 New Street Square, London, EC4A 3TW

www.netwrix.com<https://us-east-2.protection.sophos.com/?d=netwrix.com&u=aHR0cDovL3d3dy5uZXR3cml4LmNvbS8=&i=NWM0MjFiMGU4M2VkYjExNmQ2OWJhMzYz&t=OVpwNmV5YzZyaHRHenhaUDliQ3lSdkNVSVlWa1RMWk5iTmhpQWNvZmgzTT0=&h=916b42bbf514471bbca142e0482396b9>





________________________________

From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: Friday, November 15, 2024 9:05 AM
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>; techsupport <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Cc: Nick Cole <nec10@cam.ac.uk<mailto:nec10@cam.ac.uk>>; Andy Watson <Andy.Watson@netwrix.com<mailto:Andy.Watson@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Dear Damir,



To provide an update, the tempdb on the SQL server has been maxed out again so its still an ongoing issue.



[cid:image002.png@01DB3F49.C8B94870]



Thanks

Tara



From: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Sent: 07 November 2024 09:56
To: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Damir,



This situation is still the same.

“We are still working on this with Andy Watson. Can the ticket please be left opened until all investigations/tweaks have been implemented.”

Thanks

Tara





From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 07 November 2024 09:27
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please provide an update? Is this issue still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 11/1/2024 2:38 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref

Hi Damir,



We are still working on this with Andy Watson. Can the ticket be opened until all investigations/tweaks have been implemented.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 31 October 2024 11:15
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, following up on this issue, could you please advise if we can close this ticket or if you need our assistance with further troubleshooting?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/28/2024 2:51 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Andy made some additional changes to the SQL coding of the running jobs, we will be reviewing the performance of those jobs this Thursday against the servers performance.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 28 October 2024 10:49
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, could you please advise how your meeting with Andy went? Is the issue with TempDB still relevant?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/22/2024 1:49 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, thank you for your time on meeting today, we've ran following queries to determine tempdb file size and usage:

SELECT name AS [File Name], size * 8 / 1024 AS [Size (MB)], size * 8 / 1024 - CAST(FILEPROPERTY(name, 'SpaceUsed') AS INT) * 8 / 1024 AS [Available Space (MB)], growth * 8 / 1024 AS [Growth (MB)], max_size AS [Max Size] FROM sys.master_files WHERE database_id = DB_ID('tempdb');


SELECT
    s.session_id,
    s.login_name,
    s.host_name,
    t.[text] AS [Query Text],
    r.total_elapsed_time,
    r.wait_time,
    r.wait_type,
    (r.total_elapsed_time / 1000) AS [Elapsed Time (sec)],
    (r.wait_time / 1000) AS [Wait Time (sec)],
    u.user_objects_alloc_page_count AS [User Object Alloc Pages],
    u.internal_objects_alloc_page_count AS [Internal Object Alloc Pages]
FROM sys.dm_exec_sessions s
INNER JOIN sys.dm_exec_requests r ON s.session_id = r.session_id
INNER JOIN sys.dm_db_session_space_usage u ON s.session_id = u.session_id
CROSS APPLY sys.dm_exec_sql_text(r.sql_handle) t
WHERE u.user_objects_alloc_page_count + u.internal_objects_alloc_page_count > 0;

I've took screenshots of database settings, and you've provided me with csv files with output.

I will wait for your next meeting with Andy and if possible I will participate.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/15/2024 10:57 AM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Damir,



Sorry, I’ve been busy on other more pressing workload. Booked for next week.



Thanks

Tara



From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: 15 October 2024 07:47
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 5:25 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara, I've taken ownership of this ticket, I would like to take a closer look at the issue and if needed to escalate this issue to development team.

Can you please book a meeting with me using following link?

https://nwxcorp.my.salesforce-sites.com/cts?Id=.QjiqvGqjYX5XsqMsP3QsGS5LZRV5RO9NKyEGcNFPDQ-Z&MeetingID=xPcNqf4HSmIlziNJiQFXj7ik_WhpNvv.ps5agQeGqXQ-Z

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 4:22 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

Hi Tara,

Yes, it is.

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk]
Sent: 10/9/2024 4:07 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]

ref:_00D7091pB._500Q000Fc46n:ref



Hi Aleksandr,



So just to confirm, that is going to be investigated further by Netwrix? This is an ongoing issue and the Temp DB has storage capacity of 1.5TB in HDD allocation on the Virtual Server it runs on.



Thanks

Tara



________________________________

From: Netwrix Support <techsupport@netwrix.com<mailto:techsupport@netwrix.com>>
Sent: Wednesday, October 9, 2024 12:56
To: Tara Jeffery <tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]



Hi Tara,

Please disregard my previous message.

Scan is failing at this job SP_TrusteeAudit.

09/10/2024 07:50:23    ERROR    DataAnalysis:SQLScripting    ExecuteNonQuery    ""Could not allocate space for object 'dbo.SORT temporary run storage:  140982561144832' in database 'tempdb' because the 'PRIMARY' filegroup is full. Create disk space by deleting unneeded files, dropping objects in the filegroup, adding additional files to the filegroup, or setting autogrowth on for existing files in the filegroup.  The transaction log for database 'tempdb' is full due to 'ACTIVE_TRANSACTION'.""

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 10/9/2024 3:54 PM
To: tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>
Subject: RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server [ ref:!00D70091pB.!500Qk0Fc46n:ref ]


Hi Tara,

What is the current job running under GROUP_Sharepoint for 112 hours?

Please share the logs from that job.

You can check it in the Running Instances tab.

[cid:image003.png@01DB3F49.C8B94870]

Best regards,

Aleksandr Timofeev
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You
6160 Warren Parkway, Suite 100, Frisco, TX, US 75034
www.netwrix.com<http://www.netwrix.com/>


--------------- Original Message ---------------
From: Tara Jeffery [tj260@cam.ac.uk<mailto:tj260@cam.ac.uk>]
Sent: 10/9/2024 3:37 PM
To: techsupport@netwrix.com<mailto:techsupport@netwrix.com>
Subject: Netwrix Support Ticket #420653 - TempDB is full on SQL Server

ref:_00D7091pB._500Q000Fc46n:ref

TSV Log files for SharePoint job uploaded as requested

















Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.


Confidentiality notice: This message and attachments included are intended only for the addressee (s). The information contained in this message is confidential and may constitute proprietary or non-public information under international, federal, and/or state laws. Unauthorized forwarding, printing, copying, distribution, or use of such information is strictly prohibited and may be unlawful. If you are not the addressee(s), please promptly delete this message and notify the sender of the delivery error by e-mail.","RE: Netwrix Support Ticket #420653 - TempDB is full on SQL Server    [ ref:!00D70091pB.!500Qk0Fc46n:ref ]","tj260@cam.ac.uk","Tara Jeffery","techsupport@netwrix.com","","","true","2024-11-25T14:53:29.000Z","true"
