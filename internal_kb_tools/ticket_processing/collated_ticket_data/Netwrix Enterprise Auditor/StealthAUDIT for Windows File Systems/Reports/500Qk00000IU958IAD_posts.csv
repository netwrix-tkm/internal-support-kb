"Id","ParentId","Type","CreatedById","CreatedDate","Body","Title","LinkUrl","RelatedRecordId","InsertedById","LastModifiedDate"
"0D5Qk00000RChHuKAL","500Qk00000IU958IAD","TextPost","0054u000008ARZjAAO","2024-11-18T21:40:01.000Z","Description: For some reason the File System Stale content job is showing incorrect data. It only has two shares in the job when in reality it should be more. Already attempted to replace job files with solution in Instant Solutions and reran job. This is used in upper management reporting feature.","","","","0054u000008ARZjAAO","2024-11-18T21:40:01.000Z"
"0D5Qk00000RaG5NKAV","500Qk00000IU958IAD","TextPost","0054u000007MiY9AAK","2024-11-22T19:55:24.000Z","Next Steps Updated: Review the job configuration to see what the time frame is on their stale data","","","","0054u000007MiY9AAK","2024-11-22T19:55:24.000Z"
"0D5Qk00000RaG5MKAV","500Qk00000IU958IAD","TextPost","0054u000007MiY9AAK","2024-11-22T19:55:24.000Z","What We've Learned Updated: Job thinks it's completing successfully, since there are no errors in the log","","","","0054u000007MiY9AAK","2024-11-22T19:55:24.000Z"
"0D5Qk00000RiRwcKAF","500Qk00000IU958IAD","TextPost","0054u000007MiY9AAK","2024-11-25T16:47:02.000Z","<p>Changed the <b>SA_FS_StaleContent_ShareSummmary</b> analysis task to:</p><p> </p><p>IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N&#39;[dbo].[SA_FS_StaleContent_ShareSummary]&#39;) AND type in (N&#39;U&#39;))</p><p>DROP TABLE SA_FS_StaleContent_ShareSummary;</p><p>GO</p><p> </p><p>CREATE TABLE [dbo].[SA_FS_StaleContent_ShareSummary](</p><p>	[Share] [nvarchar](512) NOT NULL,</p><p>	[Folder Count] [int] NULL,</p><p>	[Last File Modification] [datetime] NULL,</p><p>	[Active Files] [bigint] NULL,</p><p>	[Stale Files] [bigint] NULL,</p><p>	[Percent Active] [int] NULL,</p><p>	[Percent Stale] [int] NULL,</p><p>	[StaleRank] [bigint] NULL</p><p>)</p><p> </p><p> </p><p>GO</p><p> </p><p>insert into SA_FS_StaleContent_ShareSummary</p><p>SELECT	&#39;\&#39; + STV.HostName + &#39;&#39; + STV.ShareName +&#39;&#39; as [Share],</p><p>		COUNT(DISTINCT stv.folderid),</p><p>		MAX([Last Modified]) as [Last File Modification], </p><p>		ISNULL(SUM(CAST([Active Files] as bigint)),0) AS [Active Files],</p><p>		ISNULL(SUM(CAST([Stale Files] as bigint)),0) AS [Stale Files],</p><p>		CASE WHEN (SUM(CAST([Stale Files] as bigint)) + SUM(CAST([Active Files] as bigint))) = 0</p><p>			THEN 0 </p><p>		ELSE </p><p>			100.0 - FLOOR(SUM(CAST([Stale Files] as bigint))*100.0/(SUM(CAST([Stale Files] as bigint)) + SUM(CAST([Active Files] as bigint))))</p><p>		end,</p><p>		CASE WHEN (SUM(CAST([Stale Files] as bigint)) + SUM(CAST([Active Files] as bigint))) = 0</p><p>			THEN 0 </p><p>		ELSE </p><p>			FLOOR(SUM(CAST([Stale Files] as bigint))*100.0/(SUM(CAST([Stale Files] as bigint)) + SUM(CAST([Active Files] as bigint))))</p><p>		end,</p><p>		1 AS StaleRank</p><p>FROM (</p><p> SELECT  </p><p>     stv.[HostName],</p><p>		 stv.[ShareName],</p><p>		 stv.resourceid as [FolderID],</p><p>     r.LastModified AS [Last Modified],</p><p>     ISNULL(FileCount0, 0) AS [Active Files],</p><p>     ISNULL(FileCount1 + FileCount2 + FileCount3 + FileCount4 +</p><p>         FileCount5 + FileCount6 + FileCount7 + FileCount8 +</p><p>         FileCount9 + FileCount10, 0) AS [Stale Files],</p><p>     ISNULL(FileCount0 + FileCount1 + FileCount2 + FileCount3 +</p><p>         FileCount4 + FileCount5 + FileCount6 + FileCount7 +</p><p>         FileCount8 + FileCount9 + FileCount10, 0) AS FileCount,</p><p>     CASE WHEN ( FileCount0 + FileCount1 + FileCount2 +</p><p>                   FileCount3 + FileCount4 + FileCount5 +</p><p>                   FileCount6 + FileCount7 + FileCount8 +</p><p>                   FileCount9 + FileCount10 )&lt;&gt;0 THEN ROUND(FileCount0 * 100 / ( FileCount0 + FileCount1 + FileCount2 +</p><p>                   FileCount3 + FileCount4 + FileCount5 +</p><p>                   FileCount6 + FileCount7 + FileCount8 +</p><p>                   FileCount9 + FileCount10 ), 2) ELSE 0 END AS [Percent Active],</p><p>     CASE WHEN ( FileCount0 + FileCount1 + FileCount2 +</p><p>                   FileCount3 + FileCount4 + FileCount5 +</p><p>                   FileCount6 + FileCount7 + FileCount8 +</p><p>                   FileCount9 + FileCount10 )&lt;&gt;0 THEN 100 - ROUND(FileCount0 * 100 / ( FileCount0 + FileCount1 +</p><p>                      FileCount2 + FileCount3 +</p><p>                      FileCount4 + FileCount5 +</p><p>                      FileCount6 + FileCount7 +</p><p>                      FileCount8 + FileCount9 +</p><p>                      FileCount10 ), 2) ELSE 0 END AS [Percent Stale]</p><p>from</p><p> dbo.SA_FSAA_SharesTraversalView as STV</p><p>left join SA_FSAA_FileAges FA on fa.host = stv.[HostID]</p><p>                 and fa.resourceid = stv.resourceid</p><p>left join SA_FSAA_Resources R on r.HOST = stv.[HostID]</p><p>								and r.ID = stv.ResourceID</p><p>where fa.[ResourceID] is not null</p><p>--and fa.[LastModified] is not null</p><p>and stv.resourcetypedescription = &#39;Folder&#39;) stv</p><p>GROUP BY STV.HostName, STV.ShareName</p><p> </p><p>GO</p><p> </p><p>UPDATE A</p><p>SET a.[StaleRank] = b.[StaleRank]</p><p>FROM SA_FS_StaleContent_ShareSummary a</p><p>INNER JOIN (SELECT share, ROW_NUMBER() over (ORDER BY [Percent Stale] desc, [Stale Files] DESC) AS StaleRank from SA_FS_StaleContent_ShareSummary) b</p><p>ON a.share = b.share</p><p> </p>","","","","0054u000007MiY9AAK","2024-11-25T16:47:02.000Z"
