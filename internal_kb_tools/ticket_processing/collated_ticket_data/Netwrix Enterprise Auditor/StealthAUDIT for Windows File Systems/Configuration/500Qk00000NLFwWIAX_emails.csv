"Id","ParentId","CreatedDate","LastModifiedDate","TextBody","Subject","FromAddress","FromName","ToAddress","CcAddress","BccAddress","HasAttachment","MessageDate","IsExternallyVisible"
"02sQk00000N1aKLIAZ","500Qk00000NLFwWIAX","2025-03-26T10:47:53.000Z","2025-03-26T10:47:53.000Z","Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:

 
Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 
﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com
ref:!00D70091pB.!500Qk0NLFwW:ref","Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-03-26T10:47:52.000Z","true"
"02sQk00000N1nz7IAB","500Qk00000NLFwWIAX","2025-03-26T12:44:22.000Z","2025-03-26T15:40:47.000Z","ref:_00D7091pB._500Q000NLFwW:ref

Hi Artem,

I have run the 0-Create Schema job again and I am seeing the same errors:


  *   Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
  *   Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
  *   Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.

I will upload the logs directly to the ticket.

Many Thanks,

Richard Ward

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.
Address: Bath Road, Calcot, Reading, RG31 7SE

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723
Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>
www.porsche.com/uk/<http://www.porsche.com/uk/>

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.




From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

EXTERNAL: This e-Mail is external.


Hi Richard,

This is Artem with a separate ticket for troubleshooting errors on Create Schema job.

I have consulted with my team regarding these errors:
[cid:image001.png@01DB9E4C.C0097530]
And here is the action plan I would like to suggest:

  1.  Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail.
  2.  To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed.
  3.  Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views.
  4.  Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors.
  5.  After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly.

As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs.
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:

  *   Export Jobs messages from the Job Status. CSV is preferred:

[image]

  *   Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: [cid:image003.png@01DB9E4C.C0097530]
  *   Right click on the Create Schema Job and select Export:
 [cid:image004.png@01DB9E4C.C0097530]

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed.
﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com
[Image removed by sender.]

ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","true","2025-03-26T12:44:02.000Z","true"
"02sQk00000N4PdjIAF","500Qk00000NLFwWIAX","2025-03-27T11:15:37.000Z","2025-03-27T11:15:37.000Z","Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref




Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-03-27T11:15:36.000Z","true"
"02sQk00000N7SbpIAF","500Qk00000NLFwWIAX","2025-03-28T12:51:32.000Z","2025-03-28T12:51:32.000Z","Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 



Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-03-28T12:51:31.000Z","true"
"02sQk00000NCJEYIA5","500Qk00000NLFwWIAX","2025-03-31T13:06:48.000Z","2025-03-31T13:06:48.000Z","Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 



Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-03-31T13:06:47.000Z","true"
"02sQk00000NF5mwIAD","500Qk00000NLFwWIAX","2025-04-01T12:53:15.000Z","2025-04-01T12:53:15.000Z","Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 
Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 



Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-01T12:53:13.000Z","true"
"02sQk00000NV7MYIA1","500Qk00000NLFwWIAX","2025-04-08T08:59:35.000Z","2025-04-08T08:59:35.000Z","Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 
Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 



Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-08T08:59:34.000Z","true"
"02sQk00000NV7JLIA1","500Qk00000NLFwWIAX","2025-04-08T09:43:00.000Z","2025-04-08T12:29:03.000Z","ref:_00D7091pB._500Q000NLFwW:ref

Hi Damir,

  1.  Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
  2.  I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.
I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

Many Thanks,

Richard Ward

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.
Address: Bath Road, Calcot, Reading, RG31 7SE

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723
Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>
www.porsche.com/uk/<http://www.porsche.com/uk/>

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.




From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

EXTERNAL: This e-Mail is external.

Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


Hello Richard,

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard,

Thank you for your time today.
After running Migrate Schema job today we saw it failing with multiple errors.
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating.

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard,

Thank you very much for sharing the logs.

I found a possibly easier solution than the one I suggested in my previous email.

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"".
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product.

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":

[cid:image001.png@01DBA872.6DB10F20]

        2. Click ""Next"" > then find the ""File System"" library and expand it:
[cid:image002.png@01DBA872.6DB10F20]

        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:

[cid:image003.png@01DBA872.6DB10F20]

        4. Click ""Next"" and select ""Use Default Settings"" for the host list.

        5. Finalize instant job wizard by selecting ""Save & Exit"" button.

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1.

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results.

Please, let me know how you would like to proceed. Looking forward to hearing back from you.
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref

Hi Artem,

I have run the 0-Create Schema job again and I am seeing the same errors:


  1.  Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
  2.  Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
  3.  Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.

I will upload the logs directly to the ticket.

Many Thanks,

Richard Ward

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.
Address: Bath Road, Calcot, Reading, RG31 7SE

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723
Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>
www.porsche.com/uk/<http://www.porsche.com/uk/>

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.
Please consider the environment before printing this email.




From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

EXTERNAL: This e-Mail is external.


Hi Richard,

This is Artem with a separate ticket for troubleshooting errors on Create Schema job.

I have consulted with my team regarding these errors:
[cid:image004.png@01DBA872.6DB10F20]
And here is the action plan I would like to suggest:

  1.  Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail.
  2.  To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed.
  3.  Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views.
  4.  Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors.
  5.  After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly.

As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs.
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:

  1.  Export Jobs messages from the Job Status. CSV is preferred:

[image]

  1.  Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: [cid:image006.png@01DBA872.6DB10F20]
  2.  Right click on the Create Schema Job and select Export:
 [cid:image007.png@01DBA872.6DB10F20]

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed.
﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com
[Image removed by sender.]

ref:!00D70091pB.!500Qk0NLFwW:ref
[Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","true","2025-04-08T09:42:42.000Z","true"
"02sQk00000NVUe8IAH","500Qk00000NLFwWIAX","2025-04-08T12:46:03.000Z","2025-04-08T12:46:03.000Z","Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref



Hi Damir,


	Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
	I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.


I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 

Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 


Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-08T12:46:02.000Z","true"
"02sQk00000NXc1JIAT","500Qk00000NLFwWIAX","2025-04-09T05:44:28.000Z","2025-04-09T05:44:28.000Z","Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref



Hi Damir,


	Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
	I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.


I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 

Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 


Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","RE: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-09T05:44:27.000Z","true"
"02sQk00000NXj4LIAT","500Qk00000NLFwWIAX","2025-04-09T06:30:35.000Z","2025-04-09T06:43:12.000Z","ref:_00D7091pB._500Q000NLFwW:ref

Hi Damir,

The output to both queries was the same and is below:

HOST
24
25
27

Many Thanks,


Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>




The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.



________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: 09 April 2025 06:44
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


EXTERNAL: This e-Mail is external.


Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

  1.  Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
  2.  I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.

I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.



Many Thanks,



Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.





From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



EXTERNAL: This e-Mail is external.



Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


Hello Richard,

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard,

Thank you for your time today.
After running Migrate Schema job today we saw it failing with multiple errors.
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating.

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard,

Thank you very much for sharing the logs.

I found a possibly easier solution than the one I suggested in my previous email.

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"".
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product.

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":

[cid:ca77c00b-cf78-4a2e-85a1-4708c79698c7@Image_0_]

        2. Click ""Next"" > then find the ""File System"" library and expand it:
[cid:896f22df-11ee-4654-91b1-20204800bc51@Image_1_]

        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:

[cid:bb36dc60-d5e3-4428-aeb8-5dd0460f6485@Image_2_]

        4. Click ""Next"" and select ""Use Default Settings"" for the host list.

        5. Finalize instant job wizard by selecting ""Save & Exit"" button.

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1.

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results.

Please, let me know how you would like to proceed. Looking forward to hearing back from you.
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Artem,



I have run the 0-Create Schema job again and I am seeing the same errors:



  1.  Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
  2.  Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
  3.  Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.



I will upload the logs directly to the ticket.



Many Thanks,



Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.





From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



EXTERNAL: This e-Mail is external.



Hi Richard,

This is Artem with a separate ticket for troubleshooting errors on Create Schema job.

I have consulted with my team regarding these errors:
[cid:827fffd7-0b1b-431f-8164-6996b37883c9@Image_3_]
And here is the action plan I would like to suggest:

  1.  Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail.
  2.  To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed.
  3.  Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views.
  4.  Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors.
  5.  After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly.

As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs.
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:

  1.  Export Jobs messages from the Job Status. CSV is preferred:

[image]

  1.  Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: [cid:da339e7f-e4f0-4ccf-bd2f-3619161ae246@Image_5_]
  2.  Right click on the Create Schema Job and select Export:

 [cid:7cd0b4dd-e753-4e21-b5a8-61f84c9d5e16@Image_6_]

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed.

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[Image removed by sender.]

ref:!00D70091pB.!500Qk0NLFwW:ref

[Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kznag&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000L23sC&from=ext]","Re: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","true","2025-04-09T06:30:11.000Z","true"
"02sQk00000NXk0PIAT","500Qk00000NLFwWIAX","2025-04-09T06:47:25.000Z","2025-04-09T06:47:25.000Z","Thank you for prompt response Richard, I've followed up with R&D team and will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/9/2025 10:30 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

 

The output to both queries was the same and is below:

 

HOST

24

25

27

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 09 April 2025 06:44
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 




Hi Damir,


	Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
	I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.


I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 

Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 


Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","Re: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-09T06:47:23.000Z","true"
"02sQk00000NaNAbIAN","500Qk00000NLFwWIAX","2025-04-10T05:48:12.000Z","2025-04-10T05:48:12.000Z","Hi Richard, development team confirmed our findings regarding missing foreign keys, The ActivityEvents and DailyActivity tables are in an invalid state.
Prior to upgrade/CreateSchema/MigrateSchema, these tables would have had a FK on the Hosts table. 
We can see this was not the case because there are hosts ids in these activity tables that are not in the Hosts table. 

To ensure there are not other problems, run:

SELECT HOST, ID
FROM SA_FSAA_Resources
WHERE HOST in (24, 25, 27);

And provide output

If there are resources that reference these hosts, that would mean there are further problems with T1 database.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/9/2025 10:47 AM
To: richard.ward@porsche.co.uk
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for prompt response Richard, I've followed up with R&D team and will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/9/2025 10:30 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

 

The output to both queries was the same and is below:

 

HOST

24

25

27

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 09 April 2025 06:44
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 




Hi Damir,


	Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
	I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.


I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 

Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 


Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","Re: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-10T05:48:11.000Z","true"
"02sQk00000NhrTeIAJ","500Qk00000NLFwWIAX","2025-04-14T05:29:16.000Z","2025-04-14T10:31:31.000Z","ref:_00D7091pB._500Q000NLFwW:ref

Hi Damir,

Apologies for the reply, but I have now run the required query, and it returned nothing.

[cid:c7c5d08a-1ad1-4a63-bcc6-d112a55a72ea]

Please let me know if you need anything further.

Many Thanks,


Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>




The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.



________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: 10 April 2025 06:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


EXTERNAL: This e-Mail is external.


Hi Richard, development team confirmed our findings regarding missing foreign keys, The ActivityEvents and DailyActivity tables are in an invalid state.
Prior to upgrade/CreateSchema/MigrateSchema, these tables would have had a FK on the Hosts table.
We can see this was not the case because there are hosts ids in these activity tables that are not in the Hosts table.

To ensure there are not other problems, run:

SELECT HOST, ID
FROM SA_FSAA_Resources
WHERE HOST in (24, 25, 27);

And provide output

If there are resources that reference these hosts, that would mean there are further problems with T1 database.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/9/2025 10:47 AM
To: richard.ward@porsche.co.uk
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for prompt response Richard, I've followed up with R&D team and will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/9/2025 10:30 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref

Hi Damir,

The output to both queries was the same and is below:

HOST
24
25
27

Many Thanks,


Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.






________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: 09 April 2025 06:44
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]




EXTERNAL: This e-Mail is external.




Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

  1.  Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
  2.  I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.

I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.



Many Thanks,



Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.





From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



EXTERNAL: This e-Mail is external.



Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


Hello Richard,

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard,

Thank you for your time today.
After running Migrate Schema job today we saw it failing with multiple errors.
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating.

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard,

Thank you very much for sharing the logs.

I found a possibly easier solution than the one I suggested in my previous email.

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"".
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product.

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":

[cid:4b79f155-e9ac-4a44-9e8a-9b715d311143@Image_0_]

        2. Click ""Next"" > then find the ""File System"" library and expand it:
[cid:326a9af9-eb5f-47f4-84a1-7c927e00b6bb@Image_1_]

        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:

[cid:39929880-1525-4859-bab4-7881616c72b2@Image_2_]

        4. Click ""Next"" and select ""Use Default Settings"" for the host list.

        5. Finalize instant job wizard by selecting ""Save & Exit"" button.

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1.

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results.

Please, let me know how you would like to proceed. Looking forward to hearing back from you.
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Artem,



I have run the 0-Create Schema job again and I am seeing the same errors:



  1.  Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
  2.  Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
  3.  Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.



I will upload the logs directly to the ticket.



Many Thanks,



Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.





From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



EXTERNAL: This e-Mail is external.



Hi Richard,

This is Artem with a separate ticket for troubleshooting errors on Create Schema job.

I have consulted with my team regarding these errors:
[cid:5554c775-de82-4df6-b201-e0adf580965c@Image_3_]
And here is the action plan I would like to suggest:

  1.  Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail.
  2.  To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed.
  3.  Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views.
  4.  Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors.
  5.  After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly.

As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs.
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:

  1.  Export Jobs messages from the Job Status. CSV is preferred:

[image]

  1.  Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: [cid:2c031072-2828-46a4-b950-d2802a4dffda@Image_5_]
  2.  Right click on the Create Schema Job and select Export:

 [cid:d47a2c8b-11a3-411e-9c1c-1f0430e8af3f@Image_6_]

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed.

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[Image removed by sender.]

ref:!00D70091pB.!500Qk0NLFwW:ref

[Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]
 [Image removed by sender.]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kznag&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000L23sC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000L2AIX&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000L4eHk&from=ext]","Re: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","true","2025-04-14T05:28:57.000Z","true"
"02sQk00000NiFZBIA3","500Qk00000NLFwWIAX","2025-04-14T10:34:35.000Z","2025-04-14T10:34:35.000Z","Thank you Richard, I will follow up with R&D and will keep you posted on their feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/14/2025 9:28 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

 

Apologies for the reply, but I have now run the required query, and it returned nothing.

 



 

Please let me know if you need anything further.

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 10 April 2025 06:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, development team confirmed our findings regarding missing foreign keys, The ActivityEvents and DailyActivity tables are in an invalid state.
Prior to upgrade/CreateSchema/MigrateSchema, these tables would have had a FK on the Hosts table. 
We can see this was not the case because there are hosts ids in these activity tables that are not in the Hosts table. 

To ensure there are not other problems, run:

SELECT HOST, ID
FROM SA_FSAA_Resources
WHERE HOST in (24, 25, 27);

And provide output

If there are resources that reference these hosts, that would mean there are further problems with T1 database.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/9/2025 10:47 AM
To: richard.ward@porsche.co.uk
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for prompt response Richard, I've followed up with R&D team and will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/9/2025 10:30 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 



Hi Damir,

 

The output to both queries was the same and is below:

 

HOST

24

25

27

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 09 April 2025 06:44
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 




Hi Damir,


	Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
	I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.


I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 

Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 


Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","Re: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-14T10:34:34.000Z","true"
"02sQk00000O0J89IAF","500Qk00000NLFwWIAX","2025-04-22T10:16:25.000Z","2025-04-22T10:16:25.000Z","Hi Richard, my apologies for late response, I was on my time off, since the query did not provide any results, this confirms the activity events that are failing to migrate are invalid because they do not have resources to relate to.

In order to correct the state of the SQL database, records that reference host 24, 25, and 27 should get removed.

Start with removing the records from SA_FSAC_ActivityEvents and SA_FSAC_DailyActivity with the follow SQL queries:

--- CODE ---DELETE FROM SA_FSAC_ActivityEvents
WHERE HOST IN (24, 25, 27)--- CODE ---


--- CODE ---
--- CODE ---

and


--- CODE ---
DELETE FROM SA_FSAC_DailyActivity
WHERE HOST IN (24, 25, 27)

--- CODE ---


--- CODE ---
--- CODE ---

Then try running Migrate Schema followed by Create Schema again. If the jobs continue to fail, please provide the new error message so that the remaining invalid records can be identified.


Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/14/2025 2:34 PM
To: richard.ward@porsche.co.uk
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you Richard, I will follow up with R&D and will keep you posted on their feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/14/2025 9:28 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

 

Apologies for the reply, but I have now run the required query, and it returned nothing.

 



 

Please let me know if you need anything further.

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 10 April 2025 06:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, development team confirmed our findings regarding missing foreign keys, The ActivityEvents and DailyActivity tables are in an invalid state.
Prior to upgrade/CreateSchema/MigrateSchema, these tables would have had a FK on the Hosts table. 
We can see this was not the case because there are hosts ids in these activity tables that are not in the Hosts table. 

To ensure there are not other problems, run:

SELECT HOST, ID
FROM SA_FSAA_Resources
WHERE HOST in (24, 25, 27);

And provide output

If there are resources that reference these hosts, that would mean there are further problems with T1 database.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/9/2025 10:47 AM
To: richard.ward@porsche.co.uk
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for prompt response Richard, I've followed up with R&D team and will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/9/2025 10:30 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 



Hi Damir,

 

The output to both queries was the same and is below:

 

HOST

24

25

27

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 09 April 2025 06:44
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, could you please run those 2 queries and provide output?

SELECT HOST FROM SA_FSAC_ActivityEvents
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;


SELECT HOST FROM SA_FSAC_DailyActivity
EXCEPT
SELECT ID FROM SA_FSAA_HOSTS;

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/8/2025 4:46 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Thank you for update Richard, I've followed up with our development team. I will keep you posted.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/8/2025 1:42 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 




Hi Damir,


	Other than the original issue that I was requested to upgraded from 11.5 to 11.6 for (DFS Namespace issue), I was not aware of any other issues with the system.
	I did not personally manipulate any data prior to the upgrade, and we didn’t complete any of the tasks specified. The only actions we completed was retrieval of logs, disablement of jobs, and setting hosts specifically against jobs.


I would hope this would be all in the other tickets notes, as Artem was quite thorough in his ticket updates.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 08 April 2025 10:00
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, I would like to clarify a few details for our team:

1. Before upgrading, were there any issues on 11.5? I recall that there was some issue, maybe you can clarify which one?
2. Was data manipulated in any way before upgrade? Can you recall such events as manually dropping T1/T2 data, repair tool, drop tables, remove host, etc? Again I would think the answer is yes, but I would like to confirm with you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 4:53 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, I've taken ownership of this ticket, reviewed the logs and escalated this issue to our development team, I will keep you posted on further feedback.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/31/2025 5:06 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]
 

Hello Richard, 

Thank you for your time on a meeting today.
The following is a recap of what we did:

After repair maintenance task has completed we run create schema job again.
This time error messages were slightly different:

No item by the name of 'FK_SA_FSAC_ActivityEvents_New_HOST' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_PathID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_ProcessID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
No item by the name of 'FK_SA_FSAC_ActivityEvents_New_TrusteeID' could be found in the current database 'StealthAUDIT', given that @itemtype was input as '(null)'.
Caution: Changing any part of an object name could break scripts and stored procedures.
Caution: Changing any part of an object name could break scripts and stored procedures.

The ALTER TABLE statement conflicted with the FOREIGN KEY constraint ""FK_SA_FSAC_ActivityEvents_PathID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAA_Resources"".

Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'.
Could not create constraint or index. See previous errors.

We then checked SA_FSAC_DailyActivity and SA_FSAC_ActivityEvents tables and noticed that neither of them has Foreign Keys that are supposed to be created by ""create schema"" job.

As of now we collected Create Schema job latest logs. Please, stand by for more details from our side.

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/28/2025 4:51 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you for your time today. 
After running Migrate Schema job today we saw it failing with multiple errors. 
You`ve uploaded log folder for Migrate Schema job, this is enough for me to continue investigating. 

I will get back to you once I have more news to share. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:15 PM
To: richard.ward@porsche.co.uk
Subject: RE: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

Hi Richard, 

Thank you very much for sharing the logs. 

I found a possibly easier solution than the one I suggested in my previous email. 

Based on the error messages we see on Create Schema job we know that an issue is caused by the data types mismatch in the Enterprise Auditor File System`s solution tables and views.
In my previous email I proposed to manually update data types after we isolate the exact tables/views and the expected data type. However, after performing additional research I found that Enterprise Auditor has a built-in instant job called ""Migrate Schema"". 
This Instant job was introduced in previous versions as a means to update schema so that it can support 64-bits ResourceIDs in case that schema was created in previous version of the product. 

As such, I would like to suggest running ""Migrate Schema"" instant job first and then re-start ""Create Schema"" job to check if data type conflicts are resolved by it.

Please, follow this link to schedule meeting with me to apply this change together. This link is for scheduling meeting via Microsoft Teams:
https://nwxcorp.my.salesforce-sites.com/cts?Id=I67KXtFybUVuAA9UkK27e4dRrPZwzWot4xKQMwBTeUw-Z&MeetingID=cKy0PT3569b_bXbp1_gCEwRiaWFe5bFA8rjL35YDxJc-Z

I would like to apply this change and check results together on a meeting, but just in case I am sharing instructions for your information:

        1. Right-Click on any Job Folder/Group in Enterprise Auditor console > then select ""Add Instant Job"":    



        2. Click ""Next"" > then find the ""File System"" library and expand it:


        3. Find the ""FS_MigrateSchema"" job, then use left-click to select it:



        4. Click ""Next"" and select ""Use Default Settings"" for the host list. 

        5. Finalize instant job wizard by selecting ""Save & Exit"" button. 

        6. The ""FS_MigrateSchema"" job should appear in the Job Group/Folder which you right clicked in step 1. 

        7. Run ""FS_MigrateSchema"", let it complete, then restart ""Create Schema"" job and check results. 


Please, let me know how you would like to proceed. Looking forward to hearing back from you. 
Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 3/26/2025 4:44 PM
To: techsupport@netwrix.com
Subject: RE: Netwrix Support Ticket #439997 - ref:_00D7091pB._500Q000NLFwW:ref - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 


Hi Artem,

 

I have run the 0-Create Schema job again and I am seeing the same errors:

 


	Column 'dbo.SA_FSDLP_MatchHits.FileId' is not the same data type as referencing column 'SA_FSDLP_MatchHits_SubjectProfile.FileId' in foreign key 'FK_SA_FSDLP_MatchHits_SubjectProfile'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_DailyActivity.FolderID' in foreign key 'FK_SA_FSAC_DailyActivity_FolderID'. Could not create constraint or index. See previous errors.
	Column 'dbo.SA_FSAA_Resources.ID' is not the same data type as referencing column 'SA_FSAC_ActivityEvents.PathID' in foreign key 'FK_SA_FSAC_ActivityEvents_PathID'.Could not create constraint or index. See previous errors.


 

I will upload the logs directly to the ticket.

 

Many Thanks,

 





Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk 

www.porsche.com/uk/





 



The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

From: Netwrix Support <techsupport@netwrix.com>
Sent: 26 March 2025 10:48
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]



 


EXTERNAL: This e-Mail is external. 


 


Hi Richard, 

This is Artem with a separate ticket for troubleshooting errors on Create Schema job. 

I have consulted with my team regarding these errors:

And here is the action plan I would like to suggest:


	Once FSAA system scan and bulk import jobs complete we should restart Create Schema job and let it fail. 
	To isolate the issue, we need to check the Create Schema > Status > Task Stats to see which analysis tasks exactly has failed. 
	Most likely the data types that are different in these tables/views are ""int"" and ""bigint"" - we will then need to inspect the SQL scripts that are been executed for those failed analysis tasks. This will allow us to understand which data types NEA tries to set for FSAA_Resources, FSAC_ActivityEvents, FSAC_DailyActivity, FSDLP_MatchHits tables and views. 
	Once we have this information, we should then be able to update data types accordingly for the Views/Tables that are mentioned in the errors. 
	After we successfully update data types, the Create Schema job should be able to create key constraints between tables/views in question correctly. 


As such, the first step should be running Create Schema job to get latest results/errors into this job`s Messages, Task Stats and Job Logs. 
Please, wait for FSAA System Scan + Bulk import to complete, then restart Create Schema job, then collect the following artifacts:


	Export Jobs messages from the Job Status. CSV is preferred: 


 


	Take screenshot of the Create Schema > Stats > Task Stats so that ""Task name"" and ""Status"" columns are visible: 
	Right click on the Create Schema Job and select Export:


 

Please, share these artifacts with me by uploading them to the 00439997-ticket using customer portal ""My Tickets"" section and notify me once upload is completed. 

﻿ I am looking forward to your reply. Thank you!

Best regards,
Artem Naskal
Technical Support Engineer EMEA
____________________ _________
Cybersecurity That Works for You

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0NLFwW:ref","Re: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","true","2025-04-22T10:16:23.000Z","true"
"02sQk00000O0LLBIA3","500Qk00000NLFwWIAX","2025-04-22T10:17:06.000Z","2025-04-25T11:51:56.000Z","ref:_00D7091pB._500Q000NLFwW:ref

﻿

I am currently out of the office with no access to emails.

For any urgent project enquiries, please contact the PMO team by sending an email to PMO@porsche.co.uk.

For any urgent support enquiries please phone the IT Helpdesk on 0370 60 60 911 or send an email to helpdesk@porsche.co.uk.

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.","Automatic reply: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","false","2025-04-22T10:16:53.000Z","true"
"02sQk00000O8nP7IAJ","500Qk00000NLFwWIAX","2025-04-25T11:52:17.000Z","2025-04-25T11:52:17.000Z","Hi Richard, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/22/2025 2:16 PM
To: techsupport@netwrix.com
Subject: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref

 ﻿
﻿

I am currently out of the office with no access to emails.

For any urgent project enquiries, please contact the PMO team by sending an email to PMO@porsche.co.uk.

For any urgent support enquiries please phone the IT Helpdesk on 0370 60 60 911 or send an email to helpdesk@porsche.co.uk.

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.","RE: Automatic reply: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","false","2025-04-25T11:52:16.000Z","true"
"02sQk00000O9RsnIAF","500Qk00000NLFwWIAX","2025-04-25T15:44:12.000Z","2025-05-02T11:26:06.000Z","ref:_00D7091pB._500Q000NLFwW:ref

Hi Damir,

I am on annual leave and I do not return until Tuesday next week.

I will review your response at this time.

Many Thanks,

Richard Ward

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.
Address: Bath Road, Calcot, Reading, RG31 7SE

IT Support: 0370 6060 911
Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>
www.porsche.com/uk/<http://www.porsche.com/uk/>


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.



________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, April 25, 2025 12:52:18 PM
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


EXTERNAL: This e-Mail is external.


Hi Richard, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/22/2025 2:16 PM
To: techsupport@netwrix.com
Subject: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref

﻿

﻿

I am currently out of the office with no access to emails.

For any urgent project enquiries, please contact the PMO team by sending an email to PMO@porsche.co.uk.

For any urgent support enquiries please phone the IT Helpdesk on 0370 60 60 911 or send an email to helpdesk@porsche.co.uk.

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.



[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000LZzqv&from=ext]","Re: Automatic reply: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","false","2025-04-25T15:43:57.000Z","true"
"02sQk00000OGahoIAD","500Qk00000NLFwWIAX","2025-04-29T10:38:19.000Z","2025-04-30T06:25:16.000Z","ref:_00D7091pB._500Q000NLFwW:ref

Hi Damir,

When trying to run the first command, I was given the following error:

Msg 547, Level 16, State 0, Line 2
The DELETE statement conflicted with the REFERENCE constraint ""FK_SA_FSAC_RenameTargets_ActivityID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAC_RenameTargets"".
The statement has been terminated.

Completion time: 2025-04-29T11:36:29.7011690+01:00

The second command ran without any errors, deleting over 8000 rows.

Many Thanks,


Richard Ward



FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd.

Address: Bath Road, Calcot, Reading, RG31 7SE



IT Support: 0370 6060 911
Direct Dial: +44118 925 2723

Mobile: +447884 008174
E-mail: Richard.Ward@porsche.co.uk<mailto:Richard.Ward@porsche.co.uk>

www.porsche.com/uk/<http://www.porsche.com/uk/>




The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.
Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 
The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  
Please consider the environment before printing this email.



________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: 25 April 2025 12:52
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]


EXTERNAL: This e-Mail is external.


Hi Richard, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/22/2025 2:16 PM
To: techsupport@netwrix.com
Subject: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref

﻿

﻿

I am currently out of the office with no access to emails.

For any urgent project enquiries, please contact the PMO team by sending an email to PMO@porsche.co.uk.

For any urgent support enquiries please phone the IT Helpdesk on 0370 60 60 911 or send an email to helpdesk@porsche.co.uk.

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England.

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.

Please consider the environment before printing this email.



[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000LZzqv&from=ext]","Re: Automatic reply: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","richard.ward@porsche.co.uk","Ward, Richard","techsupport@netwrix.com","","","false","2025-04-29T10:38:04.000Z","true"
"02sQk00000OJEO1IAP","500Qk00000NLFwWIAX","2025-04-30T06:29:21.000Z","2025-04-30T06:29:21.000Z","Hi, thank you for feedback Richard, I will consult with my team and will get back to you.

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/29/2025 2:38 PM
To: techsupport@netwrix.com
Subject: Re: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref


Hi Damir,

 

When trying to run the first command, I was given the following error:

Msg 547, Level 16, State 0, Line 2

The DELETE statement conflicted with the REFERENCE constraint ""FK_SA_FSAC_RenameTargets_ActivityID"". The conflict occurred in database ""StealthAUDIT"", table ""dbo.SA_FSAC_RenameTargets"".

The statement has been terminated.

 

Completion time: 2025-04-29T11:36:29.7011690+01:00


The second command ran without any errors, deleting over 8000 rows.

 

Many Thanks,

 


Richard Ward 

 

FIT2 | Group IT Technical Project Lead
Porsche Cars Great Britain Ltd. 

Address: Bath Road, Calcot, Reading, RG31 7SE 

 

IT Support: 0370 6060 911
Direct Dial: +44118 925 2723 

Mobile: +447884 008174
E-mail:  Richard.Ward@porsche.co.uk 

www.porsche.com/uk/

 


The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.

 

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: 25 April 2025 12:52
To: Ward, Richard (PCGB, FI) <richard.ward@porsche.co.uk>
Subject: RE: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

 



 

EXTERNAL: This e-Mail is external.
 

 

Hi Richard, hope you're doing well, have you had a chance to check my previous message?

Best Regards,
Damir Akhmatshin
Support Engineer EMEA
____________________ _________
Powerful Data Security Made Easy
300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Ward, Richard [richard.ward@porsche.co.uk]
Sent: 4/22/2025 2:16 PM
To: techsupport@netwrix.com
Subject: Automatic reply: Netwrix Support Ticket #439997 - - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137 [ ref:!00D70091pB.!500Qk0NLFwW:ref ]

ref:_00D7091pB._500Q000NLFwW:ref
 

 ﻿

﻿

I am currently out of the office with no access to emails.

For any urgent project enquiries, please contact the PMO team by sending an email to PMO@porsche.co.uk.

For any urgent support enquiries please phone the IT Helpdesk on 0370 60 60 911 or send an email to helpdesk@porsche.co.uk.

The information in this message is confidential and may be privileged. It is intended for the addressee alone. If you are not the intended recipient it is prohibited to disclose, use or copy this information. Please contact the sender immediately should this message have been transmitted incorrectly. Any opinions expressed in this email are those of the individual and cannot be relied upon as being those of Porsche.

Porsche Cars Great Britain Limited (Registered in England number: 861097) is authorised and regulated by the Financial Conduct Authority. Porsche Cars Great Britain Limited has registered offices at Bath Road, Calcot, Reading, Berkshire, RG31 7SE, England. 

The Porsche privacy policy is available on the Porsche website at www.porsche.com/uk. Email communications such as this cannot be guaranteed to be virus or error free and Porsche Cars Great Britain Limited does not accept liability for any such matters or their consequences.  

Please consider the environment before printing this email.","Re: Automatic reply: Netwrix Support Ticket #439997 -  - Create Schema job fails with ""Could not create constraint or index"" after upgrade to 11.6.0.137    [ ref:!00D70091pB.!500Qk0NLFwW:ref ]","techsupport@netwrix.com","Netwrix Support","richard.ward@porsche.co.uk","","","false","2025-04-30T06:29:20.000Z","true"
