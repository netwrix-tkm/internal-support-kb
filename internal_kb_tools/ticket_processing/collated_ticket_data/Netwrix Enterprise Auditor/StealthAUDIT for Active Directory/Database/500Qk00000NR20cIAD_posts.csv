"Id","ParentId","Type","CreatedById","CreatedDate","Body","Title","LinkUrl","RelatedRecordId","InsertedById","LastModifiedDate"
"0D5Qk00000aUFqPKAW","500Qk00000NR20cIAD","TextPost","0050g000006QqyEAAS","2025-03-28T13:25:36.000Z","Description: AD inventory is reporting successful authentication to target domain controller however data collection fails and log seems to report a script error.

Expected Result
Advice or guidance on root cause so we can resolve and complete initial AD inventory collection

Steps to Reproduce
Create scheduled task and manually run to begin AD inventory. Task runs for ~10 seconds before failing, connect status table reports access granted, analysis tasks fail due to sql error reporting that tables/views do not exist, scan log shows a script error which may be related.","","","","0050g000006QqyEAAS","2025-03-28T13:25:36.000Z"
"0D5Qk00000aUGceKAG","500Qk00000NR20cIAD","TextPost","0050g000006QqyEAAS","2025-03-28T13:26:12.000Z","Description Updated: AD inventory is reporting successful authentication to target domain controller however data collection fails and log seems to report a script error.

Expected Result
Advice or guidance on root cause so we can resolve and complete initial AD inventory collection","","","","0050g000006QqyEAAS","2025-03-28T13:26:12.000Z"
"0D5Qk00000aUGcfKAG","500Qk00000NR20cIAD","TextPost","0050g000006QqyEAAS","2025-03-28T13:26:12.000Z","Steps to Reproduce Updated: Create scheduled task and manually run to begin AD inventory. Task runs for ~10 seconds before failing, connect status table reports access granted, analysis tasks fail due to sql error reporting that tables/views do not exist, scan log shows a script error which may be related.","","","","0050g000006QqyEAAS","2025-03-28T13:26:12.000Z"
"0D5Qk00000aVI4iKAG","500Qk00000NR20cIAD","TextPost","0054u000007oss5AAA","2025-03-28T16:59:34.000Z","What We've Learned Updated: Carlos Mejia and Benjamin Warren have been engaged
a meeting is scheduled with the client at 9:30AM CST.","","","","0054u000007oss5AAA","2025-03-28T16:59:34.000Z"
"0D5Qk00000aVGaTKAW","500Qk00000NR20cIAD","TextPost","0054u000007oss5AAA","2025-03-28T16:59:47.000Z","<p><b>27/03/2025 08:37:12 INFO ADINVENTORY</b> Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Database.ADInventoryDatabase.CreateADTables &quot;Creating AD tables...&quot; NATEST1.MICRON.COM DCExtract 7744 6992 1808</p><p><b>27/03/2025 08:37:12 DEBUG ADINVENTORY </b> Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Tasks.ADInventoryScanTask.InternalProcessRecord &quot;System.Exception: Error while running script: System.Data.SqlClient.SqlException (0x80131904): Column name &#39;name&#39; does not exist in the target table or view.    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)    at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)    at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)    at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean&amp; dataReady)    at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)    at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean&amp; usedCache, Boolean asyncWrite, Boolean inRetry)    at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.SqlCommandExt.ExecuteNonQueryLogged(SqlCommand cmd)    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Database.ADInventoryDatabase.RunBatchScript(IEnumerable`1 batchScripts) ClientConnectionId:5a9c51c2-e73f-41a5-a745-e3fc08185773 Error Number:1911,State:1,Class:16    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Database.ADInventoryDatabase.RunBatchScript(IEnumerable`1 batchScripts)    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Database.ADInventoryDatabase.CreateADTables()    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Tasks.ADInventoryScanTask.InternalProcessRecord()&quot; NATEST1.MICRON.COM DCExtract 7744 6992 1808</p><p><b>27/03/2025 08:37:12 ERROR ADINVENTORY </b> Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Tasks.ADInventoryScanTask.InternalProcessRecord &quot;Error while running script: System.Data.SqlClient.SqlException (0x80131904): Column name &#39;name&#39; does not exist in the target table or view.    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)    at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)    at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)    at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean&amp; dataReady)    at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)    at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean&amp; usedCache, Boolean asyncWrite, Boolean inRetry)    at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.SqlCommandExt.ExecuteNonQueryLogged(SqlCommand cmd)    at Stealthbits.StealthAUDIT.DataCollectors.ADInventory2.Database.ADInventoryDatabase.RunBatchScript(IEnumerable`1 batchScripts) ClientConnectionId:5a9c51c2-e73f-41a5-a745-e3fc08185773 Error Number:1911,State:1,Class:16&quot; NATEST1.MICRON.COM DCExtract 7744 6992 1808 </p>","","","","0054u000007oss5AAA","2025-03-28T16:59:47.000Z"
"0D5Qk00000aVHzdKAG","500Qk00000NR20cIAD","TextPost","0050g000006QqyEAAS","2025-03-28T17:23:00.000Z","<p>I&#39;ve attempted to replicate this in lab - both on an upgraded NEA and a install on a clean host - neither situation reproduced the the issue. The source of the host list (by query/automation or manual) did not make a difference.</p><p> </p><p>This does not appear to be a product defect.  </p><p> </p><p>Ben Warren:</p><p>27/03/2025 08:37:10  ERROR  SQLSERVER  TSPSQLServerConfigItf.RunSQLScripts  &quot;File: &quot;OneDcPerDomain.func&quot;, error: Invalid column name &#39;IsDomainController&#39;  &quot;      6132  6992  1808</p><p> </p><p>Under the hood it looks like this function is using a cursor based on:</p><p> </p><p>SELECT DISTINCT [WindowsDomain] FROM [SA_HostMasterTbl]</p><p> So either there is no HostMasterTbl or there is a jacked up HostMasterTbl</p><p> Or they have an issue with their SQL service account and it can&#39;t see the HostMasterTbl</p><p> </p><p> if they can use that exact account, via SSMS, to do</p><p> </p><p>SELECT TOP(1) [Name] </p><p> FROM [SA_HostMasterTbl] </p><p> WHERE ([IsDomainController] = &#39;True&#39;)</p><p> </p><p>That will see if they can actually reference the IsDomainController column that is throwing the error.</p><p> </p><p> </p><p> </p>","","","","0050g000006QqyEAAS","2025-03-28T17:23:00.000Z"
"0D5Qk00000aVSoVKAW","500Qk00000NR20cIAD","TextPost","0050g000006QqyEAAS","2025-03-28T17:24:10.000Z","Next Steps Updated: PreSales arranged a meeting 10:30AM EDT 1-April-2025","","","","0050g000006QqyEAAS","2025-03-28T17:24:10.000Z"
"0D5Qk00000aVSoUKAW","500Qk00000NR20cIAD","TextPost","0050g000006QqyEAAS","2025-03-28T17:24:10.000Z","What We've Learned Updated: could not be replicated in lab - either on a new host or an upgrade 11.6.0.138 runs ADI without issue.

Suspect Database permissions are insufficient.","","","","0050g000006QqyEAAS","2025-03-28T17:24:10.000Z"
"0D5Qk00000apBGDKA2","500Qk00000NR20cIAD","TextPost","0054u000007MiY9AAK","2025-04-01T17:06:59.000Z","Next Steps Updated: Customer will reinstall SQL server with required collation server setting and reinstall NEA. ETA is 24-48 hours due to compliance/process on customer side. Next call scheduled for tomorrow (4/2) at 10:30AM EST.","","","","0054u000007MiY9AAK","2025-04-01T17:06:59.000Z"
