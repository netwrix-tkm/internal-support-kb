"Id","ParentId","CreatedDate","LastModifiedDate","TextBody","Subject","FromAddress","FromName","ToAddress","CcAddress","BccAddress","HasAttachment","MessageDate","IsExternallyVisible"
"02sQk00000MR9KVIA1","500Qk00000MajTTIAZ","2025-03-10T19:48:13.000Z","2025-03-10T19:48:13.000Z","Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","RE: AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","false","2025-03-10T19:48:12.000Z","true"
"02sQk00000MSyr7IAD","500Qk00000MajTTIAZ","2025-03-11T13:47:55.000Z","2025-03-11T14:23:13.000Z","ref:_00D7091pB._500Q000MajTT:ref

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=ext]","Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-11T13:47:30.000Z","true"
"02sQk00000MTK8LIAX","500Qk00000MajTTIAZ","2025-03-11T14:24:05.000Z","2025-03-11T14:24:05.000Z","I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","false","2025-03-11T14:24:03.000Z","true"
"02sQk00000MTKt7IAH","500Qk00000MajTTIAZ","2025-03-11T14:26:39.000Z","2025-03-11T14:26:39.000Z","Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-11T14:26:37.000Z","true"
"02sQk00000MUKfsIAH","500Qk00000MajTTIAZ","2025-03-11T20:29:04.000Z","2025-03-11T21:34:23.000Z","ref:_00D7091pB._500Q000MajTT:ref

Nope, I got nothing returned:

[cid:b02f1801-7436-4090-8449-19cc12a97f0d]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-11T20:28:43.000Z","true"
"02sQk00000MUXTMIA5","500Qk00000MajTTIAZ","2025-03-11T20:39:50.000Z","2025-03-11T21:33:45.000Z","ref:_00D7091pB._500Q000MajTT:ref

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:b02f1801-7436-4090-8449-19cc12a97f0d]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-11T20:39:30.000Z","true"
"02sQk00000MUg23IAD","500Qk00000MajTTIAZ","2025-03-11T21:34:20.000Z","2025-03-11T21:34:20.000Z","That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-11T21:34:18.000Z","true"
"02sQk00000MWbuLIAT","500Qk00000MajTTIAZ","2025-03-12T16:24:40.000Z","2025-03-12T17:02:05.000Z","ref:_00D7091pB._500Q000MajTT:ref

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:e27f5b7a-292a-42bc-9871-27b123e193c8]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:03c4050c-81f1-4b71-b804-9c908f1e3b4c@Image_0_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-12T16:24:17.000Z","true"
"02sQk00000MWYd9IAH","500Qk00000MajTTIAZ","2025-03-12T17:03:48.000Z","2025-03-12T17:03:48.000Z","I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-12T17:03:46.000Z","true"
"02sQk00000MWy6BIAT","500Qk00000MajTTIAZ","2025-03-12T18:49:42.000Z","2025-03-12T18:49:42.000Z","Hi Angie,
I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 
I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com; nicholas.giberson@netwrix.com","","stacy.petruzzi@netwrix.com; nicholas.zimmer@netwrix.com","true","2025-03-12T18:49:41.000Z","true"
"02sQk00000McxNNIAZ","500Qk00000MajTTIAZ","2025-03-14T21:59:04.000Z","2025-03-14T21:59:04.000Z","Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 
I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com; nicholas.giberson@netwrix.com","","nicholas.zimmer@netwrix.com","true","2025-03-14T21:59:02.000Z","true"
"02sQk00000MgUmgIAF","500Qk00000MajTTIAZ","2025-03-17T13:55:32.000Z","2025-03-17T14:28:11.000Z","ref:_00D7091pB._500Q000MajTT:ref

Ran both -

[cid:b727b579-b99a-4ead-becd-f192e54bb492]

[cid:48e8983e-8f47-49b5-b719-4f6035063ebd]
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:1d72e12b-98c6-4609-ab23-e0cce03b192b@Image_0_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:14368209-9434-4e0e-8b66-518c3989e79e@Image_1_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","nicholas.giberson@netwrix.com; techsupport@netwrix.com","","","true","2025-03-17T13:55:15.000Z","true"
"02sQk00000MgbpmIAB","500Qk00000MajTTIAZ","2025-03-17T13:58:39.000Z","2025-03-17T14:21:03.000Z","ref:_00D7091pB._500Q000MajTT:ref

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.
________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:b727b579-b99a-4ead-becd-f192e54bb492]

[cid:48e8983e-8f47-49b5-b719-4f6035063ebd]
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:1d72e12b-98c6-4609-ab23-e0cce03b192b@Image_0_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:14368209-9434-4e0e-8b66-518c3989e79e@Image_1_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","nicholas.giberson@netwrix.com; techsupport@netwrix.com","","","true","2025-03-17T13:58:23.000Z","true"
"02sQk00000MgmtCIAR","500Qk00000MajTTIAZ","2025-03-17T14:28:07.000Z","2025-03-17T14:28:07.000Z","That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 
I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-17T14:28:05.000Z","true"
"02sQk00000Mgm1yIAB","500Qk00000MajTTIAZ","2025-03-17T14:35:06.000Z","2025-03-17T14:52:55.000Z","ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.


________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:e74d1b5e-b70e-4b39-86b7-65e16053ca8c@Image_0_]

[cid:9fe2e92d-fe9a-4acc-a73b-85465378f1f2@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:b373b72b-7764-4328-96c9-523ec5e4fc7d@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:0d841809-b619-448c-93e7-a673b7045d4e@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","quinn.thomas@nice.com","","true","2025-03-17T14:34:41.000Z","true"
"02sQk00000Mgq0vIAB","500Qk00000MajTTIAZ","2025-03-17T15:49:33.000Z","2025-03-17T15:49:33.000Z","Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-17T15:49:32.000Z","true"
"02sQk00000MmDMVIA3","500Qk00000MajTTIAZ","2025-03-19T13:54:43.000Z","2025-03-19T14:07:52.000Z","ref:_00D7091pB._500Q000MajTT:ref

Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:c30eba16-d47b-4132-a528-5d106cea39d5@Image_0_]

[cid:30445e77-3b6c-48af-bf52-26104901fc4b@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:c6981171-f1e3-4938-8613-a671b6a20371@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:c0fd7a17-2f61-4a86-8cc5-9d7f18d7daa9@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-19T13:54:20.000Z","true"
"02sQk00000Mn2PCIAZ","500Qk00000MajTTIAZ","2025-03-19T19:21:49.000Z","2025-03-19T19:21:49.000Z","Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-19T19:21:47.000Z","true"
"02sQk00000MnLy1IAF","500Qk00000MajTTIAZ","2025-03-19T21:04:28.000Z","2025-03-19T21:08:44.000Z","ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:26ebde47-efab-41a6-b5f1-b8da67de132c@Image_0_]

[cid:491f27cf-a3b8-493f-a438-f7111b0618a0@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:c5291e89-a392-49a7-8062-0f2b73df3286@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:74426650-59b4-4ace-aaba-89812ce11f90@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-19T21:04:02.000Z","true"
"02sQk00000MnSxsIAF","500Qk00000MajTTIAZ","2025-03-19T21:09:05.000Z","2025-03-19T21:09:05.000Z","Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-03-19T21:09:04.000Z","true"
"02sQk00000MrdmcIAB","500Qk00000MajTTIAZ","2025-03-21T15:22:35.000Z","2025-03-21T17:10:14.000Z","ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.


2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:47834f46-3045-4432-8674-8d8d1f216ea8@Image_0_]

[cid:eeaf37f1-8627-4640-8fe8-f9d07af8454f@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:4694323f-f726-4871-af6b-1ca0f6a4f8e0@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:331031b7-236f-43d8-a028-c8fcfaef662d@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-21T15:20:06.000Z","true"
"02sQk00000MwJDlIAN","500Qk00000MajTTIAZ","2025-03-24T14:10:33.000Z","2025-03-24T14:10:33.000Z","Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","taylor.caliguiri@netwrix.com","true","2025-03-24T14:10:32.000Z","true"
"02sQk00000MwQjtIAF","500Qk00000MajTTIAZ","2025-03-24T14:30:18.000Z","2025-03-24T15:53:32.000Z","ref:_00D7091pB._500Q000MajTT:ref

attachment added
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:2436d192-f664-4496-b8ec-1d8dd4efead3@Image_0_]

[cid:f3b54e43-e637-4f32-aa81-4c755fd8ed72@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:73d684c2-d808-40cb-a0f5-2f464d6d3e2f@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:f9f020e9-af1c-4a3a-abf9-722f84e12f25@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-24T14:29:52.000Z","true"
"02sQk00000Mwh6QIAR","500Qk00000MajTTIAZ","2025-03-24T15:54:51.000Z","2025-03-24T15:54:51.000Z","Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","taylor.caliguiri@netwrix.com","true","2025-03-24T15:54:50.000Z","true"
"02sQk00000N1yjNIAR","500Qk00000MajTTIAZ","2025-03-26T14:54:09.000Z","2025-03-26T15:55:32.000Z","ref:_00D7091pB._500Q000MajTT:ref

Any update from Dev?
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

attachment added

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:8e8662a6-5d9b-4e68-a71d-4c8533605965@Image_0_]

[cid:eaeda09e-1ba0-4277-ac4b-f731cf529d15@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:860ac1d8-07b7-458e-8c62-96be919b37db@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:cb81b4a6-5aec-49e7-9c42-fbb5e398cb85@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUufh&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-26T14:53:48.000Z","true"
"02sQk00000N2CzEIAV","500Qk00000MajTTIAZ","2025-03-26T15:56:44.000Z","2025-03-26T15:56:44.000Z","Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","taylor.caliguiri@netwrix.com","true","2025-03-26T15:56:42.000Z","true"
"02sQk00000N5s10IAB","500Qk00000MajTTIAZ","2025-03-27T19:52:29.000Z","2025-03-27T19:52:29.000Z","Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","taylor.caliguiri@netwrix.com","true","2025-03-27T19:52:27.000Z","true"
"02sQk00000N8gWIIAZ","500Qk00000MajTTIAZ","2025-03-28T20:34:38.000Z","2025-03-28T20:34:38.000Z","Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","taylor.caliguiri@netwrix.com","true","2025-03-28T20:34:37.000Z","true"
"02sQk00000N8haSIAR","500Qk00000MajTTIAZ","2025-03-28T20:39:45.000Z","2025-03-28T20:44:27.000Z","ref:_00D7091pB._500Q000MajTT:ref

LOL, or not quite 14...

[cid:6ad8975b-5275-4288-9adc-fc72baf2d31e]
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

attachment added

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:6396907e-ec6c-4702-bf7b-3b70e872137c@Image_0_]

[cid:e601818b-3a9a-43fa-872e-ea4c0389ad58@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:ef8ced71-6073-4d16-82c2-86ea31db0e17@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:6f7630fc-27d1-45f7-8099-c858e4af40ce@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUufh&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Ka4eQ&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KdWmZ&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kg7Cr&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-03-28T20:39:22.000Z","true"
"02sQk00000NFc2vIAD","500Qk00000MajTTIAZ","2025-04-01T15:43:06.000Z","2025-04-01T16:38:50.000Z","ref:_00D7091pB._500Q000MajTT:ref

Any update from Dev?
________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

LOL, or not quite 14...

[cid:6ad8975b-5275-4288-9adc-fc72baf2d31e]
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

attachment added

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:6396907e-ec6c-4702-bf7b-3b70e872137c@Image_0_]

[cid:e601818b-3a9a-43fa-872e-ea4c0389ad58@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:ef8ced71-6073-4d16-82c2-86ea31db0e17@Image_2_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:6f7630fc-27d1-45f7-8099-c858e4af40ce@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUufh&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Ka4eQ&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KdWmZ&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kg7Cr&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-04-01T15:42:35.000Z","true"
"02sQk00000NFpmZIAT","500Qk00000MajTTIAZ","2025-04-01T16:57:14.000Z","2025-04-01T16:57:14.000Z","Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



LOL, or not quite 14...




 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","taylor.caliguiri@netwrix.com","true","2025-04-01T16:57:12.000Z","true"
"02sQk00000NNOdtIAH","500Qk00000MajTTIAZ","2025-04-04T12:26:27.000Z","2025-04-04T12:26:27.000Z","Hoping to get the Scripts today for you Angie. 

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



Any update from Dev?

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



LOL, or not quite 14...




 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-04-04T12:26:25.000Z","true"
"02sQk00000NOdslIAD","500Qk00000MajTTIAZ","2025-04-04T21:36:00.000Z","2025-04-04T21:36:00.000Z","I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish. 

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie. 

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 


Any update from Dev?

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



LOL, or not quite 14...




 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 





Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 


Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 



Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 

 From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ] 

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-04-04T21:35:59.000Z","true"
"02sQk00000NSP4pIAH","500Qk00000MajTTIAZ","2025-04-07T13:19:07.000Z","2025-04-07T16:12:03.000Z","ref:_00D7091pB._500Q000MajTT:ref

Script output attached.  I will try to setup Reviews today and let you know how that goes.

[cid:c7bd4838-03c5-4ede-b94a-3174b8684e88]

________________________________
From: Netwrix Support
Sent: Friday, April 4, 2025 4:36 PM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish.

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie.

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

LOL, or not quite 14...

[cid:a35b182b-f374-42a9-a477-132f5d6514e2@Image_0_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

attachment added

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:04cfcbe4-6f6a-4c34-8ddc-793c1448239b@Image_1_]

[cid:af6b7cc5-8a4c-4716-b160-3fddcaded2a7@Image_2_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:b15fdec6-553e-484a-88ae-b480751ea743@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:03cd3277-42ce-49f3-b1bf-55129a53717a@Image_4_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUufh&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Ka4eQ&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KdWmZ&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kg7Cr&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Km8Xe&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kt7bd&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KuaZx&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-04-07T13:18:45.000Z","true"
"02sQk00000NT2sUIAT","500Qk00000MajTTIAZ","2025-04-07T15:48:48.000Z","2025-04-07T16:14:53.000Z","ref:_00D7091pB._500Q000MajTT:ref

I was able to kick off a round of reviews!!!!  Success.

________________________________
From: Angie Sawyer
Sent: Monday, April 7, 2025 8:18 AM
To: Netwrix Support
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Script output attached.  I will try to setup Reviews today and let you know how that goes.

[cid:c7bd4838-03c5-4ede-b94a-3174b8684e88]

________________________________
From: Netwrix Support
Sent: Friday, April 4, 2025 4:36 PM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish.

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie.

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

LOL, or not quite 14...

[cid:a35b182b-f374-42a9-a477-132f5d6514e2@Image_0_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

attachment added

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:04cfcbe4-6f6a-4c34-8ddc-793c1448239b@Image_1_]

[cid:af6b7cc5-8a4c-4716-b160-3fddcaded2a7@Image_2_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:b15fdec6-553e-484a-88ae-b480751ea743@Image_3_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:03cd3277-42ce-49f3-b1bf-55129a53717a@Image_4_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUufh&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Ka4eQ&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KdWmZ&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kg7Cr&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Km8Xe&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kt7bd&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KuaZx&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-04-07T15:48:23.000Z","true"
"02sQk00000NSstLIAT","500Qk00000MajTTIAZ","2025-04-07T16:15:54.000Z","2025-04-07T16:15:54.000Z","Awesome, 

Lets open it up to your users and make sure all is good before we close.

Was there anything else weird we noticed? I believe the reviews behaving was our last thing to tackle.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/7/2025 10:48 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref



I was able to kick off a round of reviews!!!!  Success.

 


From: Angie Sawyer
Sent: Monday, April 7, 2025 8:18 AM
To: Netwrix Support
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 

Script output attached.  I will try to setup Reviews today and let you know how that goes.

 

 



 


From: Netwrix Support
Sent: Friday, April 4, 2025 4:36 PM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish. 

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie. 

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update from Dev?

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


LOL, or not quite 14...




 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 


From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-04-07T16:15:52.000Z","true"
"02sQk00000Na5yPIAR","500Qk00000MajTTIAZ","2025-04-09T23:51:04.000Z","2025-04-09T23:51:04.000Z","How are things looking with the Reviews?

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/7/2025 11:15 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 
Awesome, 

Lets open it up to your users and make sure all is good before we close.

Was there anything else weird we noticed? I believe the reviews behaving was our last thing to tackle.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/7/2025 10:48 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 


I was able to kick off a round of reviews!!!!  Success.

 


From: Angie Sawyer
Sent: Monday, April 7, 2025 8:18 AM
To: Netwrix Support
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 

Script output attached.  I will try to setup Reviews today and let you know how that goes.

 

 



 


From: Netwrix Support
Sent: Friday, April 4, 2025 4:36 PM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish. 

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie. 

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update from Dev?

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


LOL, or not quite 14...




 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 


From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-04-09T23:51:03.000Z","true"
"02sQk00000Nb3EfIAJ","500Qk00000MajTTIAZ","2025-04-10T13:47:09.000Z","2025-04-10T13:54:33.000Z","ref:_00D7091pB._500Q000MajTT:ref

Everything is working smoothly!!
________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, April 9, 2025 6:51 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


How are things looking with the Reviews?

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/7/2025 11:15 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


Awesome,

Lets open it up to your users and make sure all is good before we close.

Was there anything else weird we noticed? I believe the reviews behaving was our last thing to tackle.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/7/2025 10:48 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was able to kick off a round of reviews!!!!  Success.

________________________________
From: Angie Sawyer
Sent: Monday, April 7, 2025 8:18 AM
To: Netwrix Support
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Script output attached.  I will try to setup Reviews today and let you know how that goes.


[cid:5c61bfc1-2f34-4649-b392-5c7c0bc40932@Image_0_]

________________________________
From: Netwrix Support
Sent: Friday, April 4, 2025 4:36 PM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish.

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie.

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

LOL, or not quite 14...

[cid:cf3766a7-66f7-4f57-8048-3f62b4e16483@Image_1_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update from Dev?

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

attachment added

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.



2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com
2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer
2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'
2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None
2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting
2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting
2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)
   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)
   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)
   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )
   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)
   at CallSite.Target(Closure , CallSite , Func`2 , Object )
   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)
ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65
Error Number:515,State:2,Class:16

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL


Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.



________________________________
From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That sounds good so far then.

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Ran both -

[cid:91d88cc6-044e-45ce-b872-0ec7fe3221f0@Image_2_]

[cid:53e3f6f3-fb80-4176-a9d0-2500df54a6fa@Image_3_]

________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.


Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?

[cid:25f750e2-d9a7-4380-bafa-79902213e965@Image_4_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.


________________________________
From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Nope, I got nothing returned:

[cid:714ffd41-13d7-43d2-b7c2-8548656eb090@Image_5_]


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Just to confirm.

This is what you got except it said = 0?

[Image_2025-03-11_09-25-52.png]

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.

Is there something I need to do after making the ID change?


________________________________
From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]


EXTERNAL EMAIL



Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated.

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000JvFDt&from=int]

ref:!00D70091pB.!500Qk0MajTT:ref[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K3njq&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5TnR&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K5T2h&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K6mZW&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8Qmd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000K8oU1&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KEKHt&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGufR&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KGuIu&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KMfCS&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KNAhX&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUUQC&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KUufh&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Ka4eQ&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KdWmZ&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kg7Cr&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Km8Xe&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000Kt7bd&from=int]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KuaZx&from=int]

[https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000KxXCZ&from=ext]
 [https://nwxcorp.my.salesforce.com/servlet/servlet.ImageServer?oid=00D7000000091pB&esid=018Qk00000L4TIg&from=ext]","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","angie.sawyer@nice.com","Angie Sawyer","techsupport@netwrix.com","","","true","2025-04-10T13:46:50.000Z","true"
"02sQk00000NbCctIAF","500Qk00000MajTTIAZ","2025-04-10T14:18:34.000Z","2025-04-10T14:18:34.000Z","Alright. I will close this one I see you are having some job issues so looking into that ticket as well for you.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/10/2025 8:46 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref


Everything is working smoothly!!

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, April 9, 2025 6:51 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 




	
		
			
			EXTERNAL EMAIL
			
		
	

 

How are things looking with the Reviews?

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/7/2025 11:15 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 
Awesome, 

Lets open it up to your users and make sure all is good before we close.

Was there anything else weird we noticed? I believe the reviews behaving was our last thing to tackle.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/7/2025 10:48 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 




I was able to kick off a round of reviews!!!!  Success.

 


From: Angie Sawyer
Sent: Monday, April 7, 2025 8:18 AM
To: Netwrix Support
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 

Script output attached.  I will try to setup Reviews today and let you know how that goes.

 

 



 


From: Netwrix Support
Sent: Friday, April 4, 2025 4:36 PM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

I attached the SQL script ""AIC Add Identity Column.sql"" that adds the identity columns to the AIC tables. The script executes the following steps for each table, so if the table is large, it might take a long time to finish. 

- Drop FK references if any
- Create a table with an identity column
- Turn ON identity insert
- Insert data from the original table
- Turn OFF identity insert
- Drop the original table
- Rename the table
- Add constraints or indexes
- Add FK references if any

Please take a backup of your DB before you run the attached script.

Once it executes successfully, run the following query to make sure that the identity column is added to the necessary AIC tables.


--- CODE ---SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/4/2025 7:26 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hoping to get the Scripts today for you Angie. 

I'll update as soon as I have them.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 4/1/2025 11:57 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

It sounds like dev is getting a SQL script together to correct the issue. Once I've got it, I'll pass it along.

Let me know if you have any questions!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 4/1/2025 11:42 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update from Dev?

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Friday, March 28, 2025 3:39 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


LOL, or not quite 14...




 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 28, 2025 3:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

Our dev team has reviewed the logs and the issue that previously occurred with the ""SA_AIC_Resources"" table has been resolved. However, a similar error is now happening with another table, ""SA_AIC_ResourceReviews."" It appears that the AIC tables are missing identity columns, which is likely causing these errors. There’s also a chance that the same issue may arise with other tables after this one is addressed.

Please run the following on the NEA SQL database:

--- CODE ---

SELECT

 t.name AS tableName,
 c.name AS columnName,
 is_identity
FROM sys.columns c
JOIN sys.tables t ON
  t.object_id = c.object_id
WHERE
 t.name like 'SA_AIC%' AND
 is_identity = 1
ORDER BY t.name

--- CODE ---

This query returns the AIC tables that have identity columns and it should return 14 tables on the ""ID"" column.

Please send a screenshot of the output after the script has been run and I'll pass the results along to our developers.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/27/2025 3:52 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angie,

No major updates to report yet, however dev has confirmed they've got the logs on their side and have pulled this onto the current sprint for investigation.

Once they get further into their investigation, I hope to have a better update for you.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/26/2025 11:56 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hey Angine,

Nothing from dev yet, so I went ahead and poked them on it again. I should have something for you by midday tomorrow at the latest.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/26/2025 10:53 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update from Dev?

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 10:54 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

I've got that log on my side so I'll get it passed over to development. I'll let you know what are next steps are after they've had a chance to review.

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/24/2025 10:29 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

attachment added

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 24, 2025 9:10 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hey Angie,

Nick is out this week so I'll be handling this ticket on his behalf.

When you have a moment, can you please upload the AIC log to the ticket in the customer portal so our development team can take a look?

Let me know if you need any assistance locating those!

Thank you,

Tay Caliguiri

Senior Technical Support Engineer
__________________ _________
Cybersecurity That Works for You

300 Spectrum Ctr Dr #200, Irvine, CA 92618
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/21/2025 11:20 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Sorry it took me a bit to get back to this.  New Reviews are still failing with the same errors.  Let me know if you need anything else from me.

 

 

 

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Attempting login: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   dns: ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   container: DC=ifast-talk,DC=com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Directory find result for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   userPrincipalName: angie.sawyer@ifast-talk.com

2025-03-21 11:11:58 -- Info   -- 172.16.146.39   samAccountName: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 Credentials validated for: angie.sawyer

2025-03-21 11:11:58 -- Info   -- 172.16.146.39 New session created for: 'angie.sawyer' with role: 'Administrator'

2025-03-21 11:14:28 -- Info   -- 172.16.146.39 Creating report file: export1130337915

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Title:    None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Location: None

2025-03-21 11:14:28 -- Info   -- 172.16.146.39  Type:     excel

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Creating columns

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing default child elements

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Processing data

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Configuring alternating row colors conditional formatting

2025-03-21 11:14:28 -- Debug  -- 172.16.146.39 Removing worksheet checkmarks conditional formatting

2025-03-21 11:16:24 -- Error  -- 172.16.146.39 HTTP/500 Request URL: https://vastaudit01.ifast-talk.com:481/v2/admins/data/reviews/save: System.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'ID', table 'StealthAudit.dbo.SA_AIC_ResourceReviews'; column does not allow nulls. INSERT fails.

The statement has been terminated.

   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)

   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)

   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)

   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()

   at System.Data.SqlClient.SqlDataReader.get_MetaData()

   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)

   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)

   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)

   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)

   at System.Data.Common.DbCommand.ExecuteReader()

   at System.Data.Linq.SqlClient.SqlProvider.Execute(Expression query, QueryInfo queryInfo, IObjectReaderFactory factory, Object[] parentArgs, Object[] userArgs, ICompiledSubQuery[] subQueries, Object lastResult)

   at System.Data.Linq.SqlClient.SqlProvider.ExecuteAll(Expression query, QueryInfo[] queryInfos, IObjectReaderFactory factory, Object[] userArguments, ICompiledSubQuery[] subQueries)

   at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)

   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)

   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)

   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)

   at AccessInformationCenter.Model.App.Review.SaveReview(StorageDataContext dc, String name, ReviewType reviewType, ReviewOptions options, IEnumerable`1 resources, Boolean children, String creatorSid)

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.ReviewCreationTask(StorageDataContext dc, String sessionSid, Object post)

   at CallSite.Target(Closure , CallSite , AdminReviews , StorageDataContext , String , Object )

   at AccessInformationCenter.Web.Views.Administration.AdminReviews.<.ctor>b__0_9(Object e)

   at CallSite.Target(Closure , CallSite , Func`2 , Object )

   at Nancy.Routing.Route.<>c__DisplayClass15_0.<Wrap>b__0(Object parameters, CancellationToken context)

ClientConnectionId:a9de3575-2214-4763-b0d9-816eec9d9c65

Error Number:515,State:2,Class:16

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 4:09 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Great to hear, let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 4:04 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Everything ran as expected.  I'll have time tomorrow to walk through adding a new review and will let you know how it goes.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Wednesday, March 19, 2025 2:21 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Dev has another script for you. Pretty similar like you assumed.

Let me know how it goes.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---


You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

This SQL query shows you all the FK references on SA_AIC_Resources table. Make sure it returns 5 rows (uploaded a screenshot ""FKs references on AIC resources.png"" to SharePoint)

--- CODE ---
SELECT
  fk.name,  
  OBJECT_NAME(fc.parent_object_id) AS tableName,
  c.name AS fkColumn,
  OBJECT_NAME(fc.referenced_object_id) AS referenceTable,
  rc.name AS referenceColumn,
  fk.delete_referential_action_desc AS deleteCascade
FROM sys.foreign_keys AS fk
JOIN sys.foreign_key_columns fc on
  fc.constraint_object_id = fk.object_id
JOIN sys.columns c on
  c.object_id = fc.parent_object_id and
  c.column_id = fc.parent_column_id
JOIN sys.columns rc on
  rc.object_id = fc.referenced_object_id and
  rc.column_id = fc.referenced_column_id
WHERE
    OBJECT_NAME(fc.referenced_object_id) = 'SA_AIC_Resources'
--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/19/2025 8:54 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Any update Nick?  I'm guessing it's going to be about the same sort of process since it's the same kind of error.

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 17, 2025 10:49 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Thanks passing them along.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 9:34 AM
To: techsupport@netwrix.com
Cc: quinn.thomas@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

Erg.  I was able to add Resources, but unable to add Reviews, same errors, attached.

 

 

 


From: Netwrix Support
Sent: Monday, March 17, 2025 9:28 AM
To: Angie Sawyer
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


	
		
			
			EXTERNAL EMAIL
			
		
	



 

That sounds good so far then. 

Let me know.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/17/2025 8:58 AM
To: nicholas.giberson@netwrix.com; techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I hit send too early.  I was able to add a new resource after those changes.   I will follow-up again after I finish updating my resources for this review and kick it off.

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Monday, March 17, 2025 8:55 AM
To: Netwrix Support <techsupport@netwrix.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Ran both - 

 



 



 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Friday, March 14, 2025 4:59 PM
To: Angie Sawyer <angie.sawyer@nice.com>; nicholas.giberson@netwrix.com <nicholas.giberson@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Angie,

Received Fresh from development a few minutes ago, so run this Monday if you are done for the week.

I have included 2 scripts. you can just run each script in order.

First one may take a long time due to the Resources table being as large as it is.

After it runs though run the Second Script to verify that ID again.

If you have questions let me know.

--- CODE ---
-- Drop FK references to SA_AIC_Resources
ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
DROP CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
DROP CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
DROP CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID]
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
DROP CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID]
GO

--Create a table with an identity column
CREATE TABLE [dbo].[SA_AIC_Resources_V1](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Type] [smallint] NOT NULL,
    [Value] [nvarchar](450) NOT NULL
)
GO

--Turn ON identity insert, insert data from the actual table, and turn OFF identity insert
SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] ON

INSERT INTO [dbo].[SA_AIC_Resources_V1]
(ID, Type, Value)
SELECT
  ID,
  Type,
  Value
FROM [dbo].[SA_AIC_Resources]

SET IDENTITY_INSERT [dbo].[SA_AIC_Resources_V1] OFF
GO

--Drop the original table
DROP TABLE [dbo].[SA_AIC_Resources]
GO

-- Rename
Exec sp_rename 'SA_AIC_Resources_V1' ,'SA_AIC_Resources'
GO

--Add Primary and Unique key
ALTER TABLE [dbo].[SA_AIC_Resources]
ADD
  CONSTRAINT [PK_SA_AIC_Resources] PRIMARY KEY CLUSTERED ([ID] ASC),
  CONSTRAINT [UQ_SA_AIC_Resources] UNIQUE ([Value] ASC)
GO

--Add Foreign keys
ALTER TABLE [dbo].[SA_AIC_ResourceAccessRequests]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessRequests_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOwners]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOwners_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceOptions]
  ADD CONSTRAINT [FK_SA_AIC_ResourceOptions_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceAccessGroups]
  ADD CONSTRAINT [FK_SA_AIC_ResourceAccessGroups_ResourceID] FOREIGN KEY([ResourceID])
  REFERENCES [dbo].[SA_AIC_Resources] ([ID]) ON DELETE CASCADE
GO

ALTER TABLE [dbo].[SA_AIC_ResourceReviewResponses]
  ADD CONSTRAINT [FK_SA_AIC_ResourceReviewResponses_ResourceID] FOREIGN KEY (ResourceID)
  REFERENCES SA_AIC_Resources(ID) ON DELETE CASCADE
GO

--- CODE ---

You can verify that the ID column is the identity column by running this SQL query:

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:49 PM
To: angie.sawyer@nice.com; nicholas.giberson@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hi Angie,

I hope you're having a wonderful day.

I escalated this issue when the previous ticket was closed. I noticed that earlier today, Nick Zimmer from Support provided additional details for our R&D teams to review. I believe he also planned to test it in his own test environment.

I just wanted to assure you that we haven't forgotten about you—we are actively working on it.

I'll follow up with R&D and keep you updated on the progress.



Many Thanks,
Stacy

Escalation Manager

--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/12/2025 1:03 PM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]
 

I appreciate that, I'll see if I can replicate that but I will see what development things.

I agree it appears that the change didn't take so that may explain the behavior not working as expected yet.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/12/2025 11:24 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I was just going through and cleaning up my tabs in SQL and it asked if I wanted to save the column edit tab.  When I said yes, to see what it would do, it gave me this error - maybe why nothing changed in AIC?



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 4:34 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

That makes more sense at least.

I will make sure Dev is updated

Thanks for checking,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 3:39 PM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

I just realized I ran that against master.  I redid it, saw the 0 you did, but still no fix for adding resources.

 

 


From: Angie Sawyer <Angie.Sawyer@nice.com>
Sent: Tuesday, March 11, 2025 3:28 PM
To: Netwrix Support <techsupport@netwrix.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 


Nope, I got nothing returned:

 



 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Tuesday, March 11, 2025 9:26 AM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Just to confirm.

This is what you got except it said = 0?



Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/11/2025 9:24 AM
To: angie.sawyer@nice.com
Subject: Re: Netwrix Support Ticket #437825 - - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

I don't believe so, but I will doublecheck. Thanks for running through that.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Angie Sawyer [angie.sawyer@nice.com]
Sent: 3/11/2025 8:47 AM
To: techsupport@netwrix.com
Subject: Re: Netwrix Support Ticket #437825 - ref:_00D7091pB._500Q000MajTT:ref - AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

ref:_00D7091pB._500Q000MajTT:ref
 

The code below returned nothing so I made the Identity Specification change for the ID Column of SA_AIC_Resources.

 

I then tried to add a new Resource and got the same error.  Attaching the debug log file, but nothing really new in there.  

 

Is there something I need to do after making the ID change?

 

 


From: Netwrix Support <techsupport@netwrix.com>
Sent: Monday, March 10, 2025 2:48 PM
To: Angie Sawyer <angie.sawyer@nice.com>
Subject: RE: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

 



	
		
			
			EXTERNAL EMAIL
			
		
	


 

Hello Angie,

Got this from development if you could run the below code.

--- CODE ---
SELECT
  name,
 is_identity
FROM sys.columns
WHERE
 object_id = OBJECT_ID('dbo.SA_AIC_Resources')  AND
 name = 'ID'

--- CODE ---

If the is_identity column is 0 then you can make the ID column identity by following these steps:

- Right click on the ID column:
- Select Modify
- Select the ID column if it's not selected in the right top panel
- Then, in the bottom panel, go to the ""Identity Specification"" section and select yes to the ""Is Identity"" property.

If you do have the make the change, go attempt another review.
Let me know how this goes.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com


--------------- Original Message ---------------
From: Netwrix Support [techsupport@netwrix.com]
Sent: 3/5/2025 5:56 PM
To: angie.sawyer@nice.com
Subject: AIC SQL errors when adding resources [ ref:!00D70091pB.!500Qk0MajTT:ref ]

Hello Angie,

Sorry for the delay on this, I have this now escalated. 

Thanks for creating the ticket.

I'll update as soon as I have next steps.

Thanks,

Nicholas Zimmer
Technical Support Engineer Tier II

____________________ _________
Powerful Data Security Made Easy

6160 Warren Parkway, Suite 100, Frisco, TX 75034
www.netwrix.com



ref:!00D70091pB.!500Qk0MajTT:ref","Re: Netwrix Support Ticket #437825 -  - AIC SQL errors when adding resources    [ ref:!00D70091pB.!500Qk0MajTT:ref ]","techsupport@netwrix.com","Netwrix Support","angie.sawyer@nice.com","","nicholas.zimmer@netwrix.com","true","2025-04-10T14:18:33.000Z","true"
