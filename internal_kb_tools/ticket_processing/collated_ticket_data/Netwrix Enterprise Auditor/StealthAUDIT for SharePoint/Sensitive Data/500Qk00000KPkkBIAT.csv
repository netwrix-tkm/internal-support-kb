"Id","CaseNumber","Ticket_Record_Type_Name__c","Subject","Description","DevOps_Steps_to_Reproduce__c","What_We_Know__c","Next_Steps__c","Solution_Comment__c","Issue_Type__c","Ticket_Owner_Name__c","Ticket_Type__c","Platform__c","Collector_Code__c","Feature__c","Product_Version__c","Build_Number__c","Age__c","Status","Account_Name__c","Contact_Name__c","CreatedDate","ClosedDate"
"500Qk00000KPkkBIAT","00431608","Support Ticket","SPSEEK Bulk Import foreign constraint error","We recently (October 4th) implemented the 11.6.0.052 hotfix to help with the SPAC mapping issue which seemed to fix that issue, but now we have started receiving the following error on the SPSEEK Bulk Import job:

22/10/2024 11:54:52 DEBUG SHAREPOINTACCESS Stealthbits.StealthAUDIT.DataCollectors.Tasks.Task.StartExecute ""[C:56] Bulk import error: System.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint ""FK_SA_SPAA_Trustees_SiteCollectionId"". The conflict occurred in database ""NetwrixEnterpriseAuditor"", table ""dbo.SA_SPAA_Resources"". The statement has been terminated. at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted) at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest) at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry) at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry) at System.Data.SqlClient.SqlCommand.ExecuteNonQuery() at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Import.Import.<>c__DisplayClass26_0.<ExecuteMerge>b__1() at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Import.Import.<>c__DisplayClass22_0.<RetryOnDeadlock>b__0() at Stealthbits.Common.Database.DatabaseUtils.RetryOnDeadlock[TResult](Func`1 query, Func`1 cancellationPending, Action retryDelay, Int32 maxRetries) at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Import.Import.RetryOnDeadlock[TResult](Func`1 query) at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Import.Import.RetryOnDeadlock(Action query) at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Import.Import.ExecuteMerge(TableDefinition definition, String tempTableName, SqlCommand mergeCmd, SqlCommand truncCmd, Int64 maxId) at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Import.Import.ImportData(TableDefinition definition) at Stealthbits.StealthAUDIT.DataCollectors.SPAA.Tasks.BulkImportDataObjectTask.InternalProcessRecord() ClientConnectionId:956b0a46-0d5b-4a1c-a4ea-62dcf5d0a95a Error Number:547,State:0,Class:16"" LIBBANK.SHAREPOINT.COM DCExtract 10376 11888 12216

I've attached the debug job logs and the tier 2 files.","","","","Symptom
Bulk import error: System.Data.SqlClient.SqlException (0x80131904): The MERGE statement conflicted with the FOREIGN KEY constraint ""FK_SA_SPAA_Trustees_SiteCollectionId""

Cause
A bug was discovered related handling of data in with in the database.

Resolution
A patch was provided to address bug.
Bulk imports were reported to be functioning correctly as of December 2024","Product defect","Tay Caliguiri","Error","Netwrix Enterprise Auditor","StealthAUDIT for SharePoint","Sensitive Data","11.6","11.6.0.70","27.1","Closed - Resolved","Liberty Bank","Philip Richards","2025-01-09T17:28:30.000Z","2025-02-05T19:43:25.000Z"
